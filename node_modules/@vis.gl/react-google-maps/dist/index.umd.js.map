{"version":3,"file":"index.umd.js","sources":["../src/libraries/api-loading-status.ts","../src/libraries/google-maps-api-loader.ts","../src/components/api-provider.tsx","../src/components/map/use-map-events.ts","../src/libraries/use-deep-compare-effect.tsx","../src/components/map/use-map-options.ts","../src/hooks/use-api-loading-status.ts","../src/components/map/use-deckgl-camera-update.ts","../src/libraries/lat-lng-utils.ts","../src/components/map/use-map-camera-params.ts","../src/components/map/auth-failure-message.tsx","../src/libraries/use-callback-ref.tsx","../src/hooks/use-api-is-loaded.ts","../src/libraries/use-force-update.ts","../src/components/map/use-tracked-camera-state-ref.ts","../src/components/map/use-map-instance.ts","../src/components/map/index.tsx","../src/libraries/errors.ts","../src/hooks/use-map.ts","../src/hooks/use-maps-library.ts","../src/hooks/use-maps-event-listener.ts","../src/hooks/use-prop-binding.ts","../src/hooks/use-dom-event-listener.ts","../src/components/advanced-marker.tsx","../src/libraries/set-value-for-styles.ts","../src/components/info-window.tsx","../src/libraries/create-static-maps-url/helpers.ts","../src/libraries/create-static-maps-url/assemble-marker-params.ts","../src/libraries/create-static-maps-url/assemble-path-params.ts","../src/libraries/create-static-maps-url/assemble-map-type-styles.ts","../src/libraries/create-static-maps-url/index.ts","../src/components/static-map.tsx","../src/components/map-control.tsx","../src/components/marker.tsx","../src/components/pin.tsx","../src/libraries/limit-tilt-range.ts"],"sourcesContent":["export const APILoadingStatus = {\n  NOT_LOADED: 'NOT_LOADED',\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  FAILED: 'FAILED',\n  AUTH_FAILURE: 'AUTH_FAILURE'\n};\nexport type APILoadingStatus =\n  (typeof APILoadingStatus)[keyof typeof APILoadingStatus];\n","import {APILoadingStatus} from './api-loading-status';\n\nexport type ApiParams = {\n  key: string;\n  v?: string;\n  language?: string;\n  region?: string;\n  libraries?: string;\n  channel?: number;\n  solutionChannel?: string;\n  authReferrerPolicy?: string;\n};\n\ntype LoadingStatusCallback = (status: APILoadingStatus) => void;\n\nconst MAPS_API_BASE_URL = 'https://maps.googleapis.com/maps/api/js';\n\n/**\n * A GoogleMapsApiLoader to reliably load and unload the Google Maps JavaScript API.\n *\n * The actual loading and unloading is delayed into the microtask queue, to\n * allow using the API in an useEffect hook, without worrying about multiple API loads.\n */\nexport class GoogleMapsApiLoader {\n  /**\n   * The current loadingStatus of the API.\n   */\n  public static loadingStatus: APILoadingStatus = APILoadingStatus.NOT_LOADED;\n\n  /**\n   * The parameters used for first loading the API.\n   */\n  public static serializedApiParams?: string;\n\n  /**\n   * A list of functions to be notified when the loading status changes.\n   */\n  private static listeners: LoadingStatusCallback[] = [];\n\n  /**\n   * Loads the Maps JavaScript API with the specified parameters.\n   * Since the Maps library can only be loaded once per page, this will\n   * produce a warning when called multiple times with different\n   * parameters.\n   *\n   * The returned promise resolves when loading completes\n   * and rejects in case of an error or when the loading was aborted.\n   */\n  static async load(\n    params: ApiParams,\n    onLoadingStatusChange: (status: APILoadingStatus) => void\n  ): Promise<void> {\n    const libraries = params.libraries ? params.libraries.split(',') : [];\n    const serializedParams = this.serializeParams(params);\n\n    this.listeners.push(onLoadingStatusChange);\n\n    // Note: if `google.maps.importLibrary` has been defined externally, we\n    //   assume that loading is complete and successful.\n    //   If it was defined by a previous call to this method, a warning\n    //   message is logged if there are differences in api-parameters used\n    //   for both calls.\n\n    if (window.google?.maps?.importLibrary as unknown) {\n      // no serialized parameters means it was loaded externally\n      if (!this.serializedApiParams) {\n        this.loadingStatus = APILoadingStatus.LOADED;\n      }\n      this.notifyLoadingStatusListeners();\n    } else {\n      this.serializedApiParams = serializedParams;\n      this.initImportLibrary(params);\n    }\n\n    if (\n      this.serializedApiParams &&\n      this.serializedApiParams !== serializedParams\n    ) {\n      console.warn(\n        `[google-maps-api-loader] The maps API has already been loaded ` +\n          `with different parameters and will not be loaded again. Refresh the ` +\n          `page for new values to have effect.`\n      );\n    }\n\n    const librariesToLoad = ['maps', ...libraries];\n    await Promise.all(\n      librariesToLoad.map(name => google.maps.importLibrary(name))\n    );\n  }\n\n  /**\n   * Serialize the parameters used to load the library for easier comparison.\n   */\n  private static serializeParams(params: ApiParams): string {\n    return [\n      params.v,\n      params.key,\n      params.language,\n      params.region,\n      params.authReferrerPolicy,\n      params.solutionChannel\n    ].join('/');\n  }\n\n  /**\n   * Creates the global `google.maps.importLibrary` function for bootstrapping.\n   * This is essentially a formatted version of the dynamic loading script\n   * from the official documentation with some minor adjustments.\n   *\n   * The created importLibrary function will load the Google Maps JavaScript API,\n   * which will then replace the `google.maps.importLibrary` function with the full\n   * implementation.\n   *\n   * @see https://developers.google.com/maps/documentation/javascript/load-maps-js-api#dynamic-library-import\n   */\n  private static initImportLibrary(params: ApiParams) {\n    if (!window.google) window.google = {} as never;\n    if (!window.google.maps) window.google.maps = {} as never;\n\n    if (window.google.maps['importLibrary']) {\n      console.error(\n        '[google-maps-api-loader-internal]: initImportLibrary must only be called once'\n      );\n\n      return;\n    }\n\n    let apiPromise: Promise<void> | null = null;\n\n    const loadApi = () => {\n      if (apiPromise) return apiPromise;\n\n      apiPromise = new Promise((resolve, reject) => {\n        const scriptElement = document.createElement('script');\n        const urlParams = new URLSearchParams();\n\n        for (const [key, value] of Object.entries(params)) {\n          const urlParamName = key.replace(\n            /[A-Z]/g,\n            t => '_' + t[0].toLowerCase()\n          );\n          urlParams.set(urlParamName, String(value));\n        }\n        urlParams.set('loading', 'async');\n        urlParams.set('callback', '__googleMapsCallback__');\n\n        scriptElement.async = true;\n        scriptElement.src = MAPS_API_BASE_URL + `?` + urlParams.toString();\n        scriptElement.nonce =\n          (document.querySelector('script[nonce]') as HTMLScriptElement)\n            ?.nonce || '';\n\n        scriptElement.onerror = () => {\n          this.loadingStatus = APILoadingStatus.FAILED;\n          this.notifyLoadingStatusListeners();\n          reject(new Error('The Google Maps JavaScript API could not load.'));\n        };\n\n        window.__googleMapsCallback__ = () => {\n          this.loadingStatus = APILoadingStatus.LOADED;\n          this.notifyLoadingStatusListeners();\n          resolve();\n        };\n\n        window.gm_authFailure = () => {\n          this.loadingStatus = APILoadingStatus.AUTH_FAILURE;\n          this.notifyLoadingStatusListeners();\n        };\n\n        this.loadingStatus = APILoadingStatus.LOADING;\n        this.notifyLoadingStatusListeners();\n\n        document.head.append(scriptElement);\n      });\n\n      return apiPromise;\n    };\n\n    // for the first load, we declare an importLibrary function that will\n    // be overwritten once the api is loaded.\n    google.maps.importLibrary = libraryName =>\n      loadApi().then(() => google.maps.importLibrary(libraryName));\n  }\n\n  /**\n   * Calls all registered loadingStatusListeners after a status update.\n   */\n  private static notifyLoadingStatusListeners() {\n    for (const fn of this.listeners) {\n      fn(this.loadingStatus);\n    }\n  }\n}\n\n// Declare global maps callback functions\ndeclare global {\n  interface Window {\n    __googleMapsCallback__?: () => void;\n    gm_authFailure?: () => void;\n  }\n}\n","import React, {\n  FunctionComponent,\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useState\n} from 'react';\n\nimport {\n  ApiParams,\n  GoogleMapsApiLoader\n} from '../libraries/google-maps-api-loader';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\ntype ImportLibraryFunction = typeof google.maps.importLibrary;\ntype GoogleMapsLibrary = Awaited<ReturnType<ImportLibraryFunction>>;\ntype LoadedLibraries = {[name: string]: GoogleMapsLibrary};\n\nexport interface APIProviderContextValue {\n  status: APILoadingStatus;\n  loadedLibraries: LoadedLibraries;\n  importLibrary: typeof google.maps.importLibrary;\n  mapInstances: Record<string, google.maps.Map>;\n  addMapInstance: (map: google.maps.Map, id?: string) => void;\n  removeMapInstance: (id?: string) => void;\n  clearMapInstances: () => void;\n}\n\nconst DEFAULT_SOLUTION_CHANNEL = 'GMP_visgl_rgmlibrary_v1_default';\n\nexport const APIProviderContext =\n  React.createContext<APIProviderContextValue | null>(null);\n\nexport type APIProviderProps = PropsWithChildren<{\n  /**\n   * apiKey must be provided to load the Google Maps JavaScript API. To create an API key, see: https://developers.google.com/maps/documentation/javascript/get-api-key\n   * Part of:\n   */\n  apiKey: string;\n  /**\n   * A custom id to reference the script tag can be provided. The default is set to 'google-maps-api'\n   * @default 'google-maps-api'\n   */\n  libraries?: Array<string>;\n  /**\n   * A specific version of the Google Maps JavaScript API can be used.\n   * Read more about versioning: https://developers.google.com/maps/documentation/javascript/versions\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  version?: string;\n  /**\n   * Sets the map to a specific region.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  region?: string;\n  /**\n   * Use a specific language for the map.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  language?: string;\n  /**\n   * auth_referrer_policy can be set to 'origin'.\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  authReferrerPolicy?: string;\n  /**\n   * To understand usage and ways to improve our solutions, Google includes the\n   * `solution_channel` query parameter in API calls to gather information about\n   * code usage. You may opt out at any time by setting this attribute to an\n   * empty string. Read more in the\n   * [documentation](https://developers.google.com/maps/reporting-and-monitoring/reporting#solutions-usage).\n   */\n  channel?: number;\n  /**\n   * To track usage of Google Maps JavaScript API via numeric channels. The only acceptable channel values are numbers from 0-999.\n   * Read more in the\n   * [documentation](https://developers.google.com/maps/reporting-and-monitoring/reporting#usage-tracking-per-channel)\n   */\n  solutionChannel?: string;\n  /**\n   * A function that can be used to execute code after the Google Maps JavaScript API has been loaded.\n   */\n  onLoad?: () => void;\n  /**\n   * A function that will be called if there was an error when loading the Google Maps JavaScript API.\n   */\n  onError?: (error: unknown) => void;\n}>;\n\n/**\n * local hook to set up the map-instance management context.\n */\nfunction useMapInstances() {\n  const [mapInstances, setMapInstances] = useState<\n    Record<string, google.maps.Map>\n  >({});\n\n  const addMapInstance = (mapInstance: google.maps.Map, id = 'default') => {\n    setMapInstances(instances => ({...instances, [id]: mapInstance}));\n  };\n\n  const removeMapInstance = (id = 'default') => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setMapInstances(({[id]: _, ...remaining}) => remaining);\n  };\n\n  const clearMapInstances = () => {\n    setMapInstances({});\n  };\n\n  return {mapInstances, addMapInstance, removeMapInstance, clearMapInstances};\n}\n\n/**\n * local hook to handle the loading of the maps API, returns the current loading status\n * @param props\n */\nfunction useGoogleMapsApiLoader(props: APIProviderProps) {\n  const {\n    onLoad,\n    onError,\n    apiKey,\n    version,\n    libraries = [],\n    ...otherApiParams\n  } = props;\n\n  const [status, setStatus] = useState<APILoadingStatus>(\n    GoogleMapsApiLoader.loadingStatus\n  );\n  const [loadedLibraries, addLoadedLibrary] = useReducer(\n    (\n      loadedLibraries: LoadedLibraries,\n      action: {name: keyof LoadedLibraries; value: LoadedLibraries[string]}\n    ) => {\n      return loadedLibraries[action.name]\n        ? loadedLibraries\n        : {...loadedLibraries, [action.name]: action.value};\n    },\n    {}\n  );\n\n  const librariesString = useMemo(() => libraries?.join(','), [libraries]);\n  const serializedParams = useMemo(\n    () => JSON.stringify({apiKey, version, ...otherApiParams}),\n    [apiKey, version, otherApiParams]\n  );\n\n  const importLibrary: typeof google.maps.importLibrary = useCallback(\n    async (name: string) => {\n      if (loadedLibraries[name]) {\n        return loadedLibraries[name];\n      }\n\n      if (!google?.maps?.importLibrary) {\n        throw new Error(\n          '[api-provider-internal] importLibrary was called before ' +\n            'google.maps.importLibrary was defined.'\n        );\n      }\n\n      const res = await window.google.maps.importLibrary(name);\n      addLoadedLibrary({name, value: res});\n\n      return res;\n    },\n    [loadedLibraries]\n  );\n\n  useEffect(\n    () => {\n      (async () => {\n        try {\n          const params: ApiParams = {key: apiKey, ...otherApiParams};\n          if (version) params.v = version;\n          if (librariesString?.length > 0) params.libraries = librariesString;\n\n          if (\n            params.channel === undefined ||\n            params.channel < 0 ||\n            params.channel > 999\n          )\n            delete params.channel;\n\n          if (params.solutionChannel === undefined)\n            params.solutionChannel = DEFAULT_SOLUTION_CHANNEL;\n          else if (params.solutionChannel === '') delete params.solutionChannel;\n\n          await GoogleMapsApiLoader.load(params, status => setStatus(status));\n\n          for (const name of ['core', 'maps', ...libraries]) {\n            await importLibrary(name);\n          }\n\n          if (onLoad) {\n            onLoad();\n          }\n        } catch (error) {\n          if (onError) {\n            onError(error);\n          } else {\n            console.error(\n              '<ApiProvider> failed to load the Google Maps JavaScript API',\n              error\n            );\n          }\n        }\n      })();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [apiKey, librariesString, serializedParams]\n  );\n\n  return {\n    status,\n    loadedLibraries,\n    importLibrary\n  };\n}\n\n/**\n * Component to wrap the components from this library and load the Google Maps JavaScript API\n */\nexport const APIProvider: FunctionComponent<APIProviderProps> = props => {\n  const {children, ...loaderProps} = props;\n  const {mapInstances, addMapInstance, removeMapInstance, clearMapInstances} =\n    useMapInstances();\n\n  const {status, loadedLibraries, importLibrary} =\n    useGoogleMapsApiLoader(loaderProps);\n\n  const contextValue: APIProviderContextValue = useMemo(\n    () => ({\n      mapInstances,\n      addMapInstance,\n      removeMapInstance,\n      clearMapInstances,\n      status,\n      loadedLibraries,\n      importLibrary\n    }),\n    [\n      mapInstances,\n      addMapInstance,\n      removeMapInstance,\n      clearMapInstances,\n      status,\n      loadedLibraries,\n      importLibrary\n    ]\n  );\n\n  return (\n    <APIProviderContext.Provider value={contextValue}>\n      {children}\n    </APIProviderContext.Provider>\n  );\n};\n","import {useEffect} from 'react';\n\n/**\n * Handlers for all events that could be emitted by map-instances.\n */\nexport type MapEventProps = Partial<{\n  // map view state events\n  onBoundsChanged: (event: MapCameraChangedEvent) => void;\n  onCenterChanged: (event: MapCameraChangedEvent) => void;\n  onHeadingChanged: (event: MapCameraChangedEvent) => void;\n  onTiltChanged: (event: MapCameraChangedEvent) => void;\n  onZoomChanged: (event: MapCameraChangedEvent) => void;\n  onCameraChanged: (event: MapCameraChangedEvent) => void;\n\n  // mouse / touch / pointer events\n  onClick: (event: MapMouseEvent) => void;\n  onDblclick: (event: MapMouseEvent) => void;\n  onContextmenu: (event: MapMouseEvent) => void;\n  onMousemove: (event: MapMouseEvent) => void;\n  onMouseover: (event: MapMouseEvent) => void;\n  onMouseout: (event: MapMouseEvent) => void;\n  onDrag: (event: MapEvent) => void;\n  onDragend: (event: MapEvent) => void;\n  onDragstart: (event: MapEvent) => void;\n\n  // loading events\n  onTilesLoaded: (event: MapEvent) => void;\n  onIdle: (event: MapEvent) => void;\n\n  // configuration events\n  onProjectionChanged: (event: MapEvent) => void;\n  onIsFractionalZoomEnabledChanged: (event: MapEvent) => void;\n  onMapCapabilitiesChanged: (event: MapEvent) => void;\n  onMapTypeIdChanged: (event: MapEvent) => void;\n  onRenderingTypeChanged: (event: MapEvent) => void;\n}>;\n\n/**\n * Sets up effects to bind event-handlers for all event-props in MapEventProps.\n * @internal\n */\nexport function useMapEvents(\n  map: google.maps.Map | null,\n  props: MapEventProps\n) {\n  // note: calling a useEffect hook from within a loop is prohibited by the\n  // rules of hooks, but it's ok here since it's unconditional and the number\n  // and order of iterations is always strictly the same.\n  // (see https://legacy.reactjs.org/docs/hooks-rules.html)\n\n  for (const propName of eventPropNames) {\n    // fixme: this cast is essentially a 'trust me, bro' for typescript, but\n    //   a proper solution seems way too complicated right now\n    const handler = props[propName] as (ev: MapEvent) => void;\n    const eventType = propNameToEventType[propName];\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      if (!map) return;\n      if (!handler) return;\n\n      const listener = google.maps.event.addListener(\n        map,\n        eventType,\n        (ev?: google.maps.MapMouseEvent | google.maps.IconMouseEvent) => {\n          handler(createMapEvent(eventType, map, ev));\n        }\n      );\n\n      return () => listener.remove();\n    }, [map, eventType, handler]);\n  }\n}\n\n/**\n * Create the wrapped map-events used for the event-props.\n * @param type the event type as it is specified to the maps api\n * @param map the map instance the event originates from\n * @param srcEvent the source-event if there is one.\n */\nfunction createMapEvent(\n  type: string,\n  map: google.maps.Map,\n  srcEvent?: google.maps.MapMouseEvent | google.maps.IconMouseEvent\n): MapEvent {\n  const ev: MapEvent = {\n    type,\n    map,\n    detail: {},\n    stoppable: false,\n    stop: () => {}\n  };\n\n  if (cameraEventTypes.includes(type)) {\n    const camEvent = ev as MapCameraChangedEvent;\n\n    const center = map.getCenter();\n    const zoom = map.getZoom();\n    const heading = map.getHeading() || 0;\n    const tilt = map.getTilt() || 0;\n    const bounds = map.getBounds();\n\n    if (!center || !bounds || !Number.isFinite(zoom)) {\n      console.warn(\n        '[createEvent] at least one of the values from the map ' +\n          'returned undefined. This is not expected to happen. Please ' +\n          'report an issue at https://github.com/visgl/react-google-maps/issues/new'\n      );\n    }\n\n    camEvent.detail = {\n      center: center?.toJSON() || {lat: 0, lng: 0},\n      zoom: (zoom as number) || 0,\n      heading: heading as number,\n      tilt: tilt as number,\n      bounds: bounds?.toJSON() || {\n        north: 90,\n        east: 180,\n        south: -90,\n        west: -180\n      }\n    };\n\n    return camEvent;\n  } else if (mouseEventTypes.includes(type)) {\n    if (!srcEvent)\n      throw new Error('[createEvent] mouse events must provide a srcEvent');\n    const mouseEvent = ev as MapMouseEvent;\n\n    mouseEvent.domEvent = srcEvent.domEvent;\n    mouseEvent.stoppable = true;\n    mouseEvent.stop = () => srcEvent.stop();\n\n    mouseEvent.detail = {\n      latLng: srcEvent.latLng?.toJSON() || null,\n      placeId: (srcEvent as google.maps.IconMouseEvent).placeId\n    };\n\n    return mouseEvent;\n  }\n\n  return ev;\n}\n\n/**\n * maps the camelCased names of event-props to the corresponding event-types\n * used in the maps API.\n */\nconst propNameToEventType: {[prop in keyof Required<MapEventProps>]: string} = {\n  onBoundsChanged: 'bounds_changed',\n  onCenterChanged: 'center_changed',\n  onClick: 'click',\n  onContextmenu: 'contextmenu',\n  onDblclick: 'dblclick',\n  onDrag: 'drag',\n  onDragend: 'dragend',\n  onDragstart: 'dragstart',\n  onHeadingChanged: 'heading_changed',\n  onIdle: 'idle',\n  onIsFractionalZoomEnabledChanged: 'isfractionalzoomenabled_changed',\n  onMapCapabilitiesChanged: 'mapcapabilities_changed',\n  onMapTypeIdChanged: 'maptypeid_changed',\n  onMousemove: 'mousemove',\n  onMouseout: 'mouseout',\n  onMouseover: 'mouseover',\n  onProjectionChanged: 'projection_changed',\n  onRenderingTypeChanged: 'renderingtype_changed',\n  onTilesLoaded: 'tilesloaded',\n  onTiltChanged: 'tilt_changed',\n  onZoomChanged: 'zoom_changed',\n\n  // note: onCameraChanged is an alias for the bounds_changed event,\n  // since that is going to be fired in every situation where the camera is\n  // updated.\n  onCameraChanged: 'bounds_changed'\n} as const;\n\nconst cameraEventTypes = [\n  'bounds_changed',\n  'center_changed',\n  'heading_changed',\n  'tilt_changed',\n  'zoom_changed'\n];\n\nconst mouseEventTypes = [\n  'click',\n  'contextmenu',\n  'dblclick',\n  'mousemove',\n  'mouseout',\n  'mouseover'\n];\n\ntype MapEventPropName = keyof MapEventProps;\nconst eventPropNames = Object.keys(propNameToEventType) as MapEventPropName[];\n\nexport type MapEvent<T = unknown> = {\n  type: string;\n  map: google.maps.Map;\n  detail: T;\n\n  stoppable: boolean;\n  stop: () => void;\n  domEvent?: MouseEvent | TouchEvent | PointerEvent | KeyboardEvent | Event;\n};\n\nexport type MapMouseEvent = MapEvent<{\n  latLng: google.maps.LatLngLiteral | null;\n  placeId: string | null;\n}>;\n\nexport type MapCameraChangedEvent = MapEvent<{\n  center: google.maps.LatLngLiteral;\n  bounds: google.maps.LatLngBoundsLiteral;\n  zoom: number;\n  heading: number;\n  tilt: number;\n}>;\n","import {DependencyList, EffectCallback, useEffect, useRef} from 'react';\nimport isDeepEqual from 'fast-deep-equal';\n\nexport function useDeepCompareEffect(\n  effect: EffectCallback,\n  deps: DependencyList\n) {\n  const ref = useRef<DependencyList | undefined>(undefined);\n\n  if (!ref.current || !isDeepEqual(deps, ref.current)) {\n    ref.current = deps;\n  }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(effect, ref.current);\n}\n","import {MapProps} from '../map';\nimport {useDeepCompareEffect} from '../../libraries/use-deep-compare-effect';\n\nconst mapOptionKeys: Set<keyof google.maps.MapOptions> = new Set([\n  'backgroundColor',\n  'clickableIcons',\n  'controlSize',\n  'disableDefaultUI',\n  'disableDoubleClickZoom',\n  'draggable',\n  'draggableCursor',\n  'draggingCursor',\n  'fullscreenControl',\n  'fullscreenControlOptions',\n  'gestureHandling',\n  'headingInteractionEnabled',\n  'isFractionalZoomEnabled',\n  'keyboardShortcuts',\n  'mapTypeControl',\n  'mapTypeControlOptions',\n  'mapTypeId',\n  'maxZoom',\n  'minZoom',\n  'noClear',\n  'panControl',\n  'panControlOptions',\n  'restriction',\n  'rotateControl',\n  'rotateControlOptions',\n  'scaleControl',\n  'scaleControlOptions',\n  'scrollwheel',\n  'streetView',\n  'streetViewControl',\n  'streetViewControlOptions',\n  'styles',\n  'tiltInteractionEnabled',\n  'zoomControl',\n  'zoomControlOptions'\n]);\n\n/**\n * Internal hook to update the map-options when props are changed.\n *\n * @param map the map instance\n * @param mapProps the props to update the map-instance with\n * @internal\n */\nexport function useMapOptions(map: google.maps.Map | null, mapProps: MapProps) {\n  /* eslint-disable react-hooks/exhaustive-deps --\n   *\n   * The following effects aren't triggered when the map is changed.\n   * In that case, the values will be or have been passed to the map\n   * constructor via mapOptions.\n   */\n\n  const mapOptions: google.maps.MapOptions = {};\n  const keys = Object.keys(mapProps) as (keyof google.maps.MapOptions)[];\n  for (const key of keys) {\n    if (!mapOptionKeys.has(key)) continue;\n\n    mapOptions[key] = mapProps[key] as never;\n  }\n\n  // update the map options when mapOptions is changed\n  // Note: due to the destructuring above, mapOptions will be seen as changed\n  //   with every re-render, so we're assuming the maps-api will properly\n  //   deal with unchanged option-values passed into setOptions.\n  useDeepCompareEffect(() => {\n    if (!map) return;\n\n    map.setOptions(mapOptions);\n  }, [mapOptions]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n}\n","import {useContext} from 'react';\nimport {APIProviderContext} from '../components/api-provider';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\nexport function useApiLoadingStatus(): APILoadingStatus {\n  return useContext(APIProviderContext)?.status || APILoadingStatus.NOT_LOADED;\n}\n","import {useLayoutEffect} from 'react';\n\nexport type DeckGlCompatProps = {\n  /**\n   * Viewport from deck.gl\n   */\n  viewport?: unknown;\n  /**\n   * View state from deck.gl\n   */\n  viewState?: Record<string, unknown>;\n  /**\n   * Initial View State from deck.gl\n   */\n  initialViewState?: Record<string, unknown>;\n};\n\n/**\n * Internal hook that updates the camera when deck.gl viewState changes.\n * @internal\n */\nexport function useDeckGLCameraUpdate(\n  map: google.maps.Map | null,\n  props: DeckGlCompatProps\n) {\n  const {viewport, viewState} = props;\n  const isDeckGlControlled = !!viewport;\n\n  useLayoutEffect(() => {\n    if (!map || !viewState) return;\n\n    const {\n      latitude,\n      longitude,\n      bearing: heading,\n      pitch: tilt,\n      zoom\n    } = viewState as Record<string, number>;\n\n    map.moveCamera({\n      center: {lat: latitude, lng: longitude},\n      heading,\n      tilt,\n      zoom: zoom + 1\n    });\n  }, [map, viewState]);\n\n  return isDeckGlControlled;\n}\n","export function isLatLngLiteral(\n  obj: unknown\n): obj is google.maps.LatLngLiteral {\n  if (!obj || typeof obj !== 'object') return false;\n  if (!('lat' in obj && 'lng' in obj)) return false;\n\n  return Number.isFinite(obj.lat) && Number.isFinite(obj.lng);\n}\n\nexport function latLngEquals(\n  a: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null,\n  b: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null\n): boolean {\n  if (!a || !b) return false;\n  const A = toLatLngLiteral(a);\n  const B = toLatLngLiteral(b);\n  if (A.lat !== B.lat || A.lng !== B.lng) return false;\n  return true;\n}\n\nexport function toLatLngLiteral(\n  obj: google.maps.LatLngLiteral | google.maps.LatLng\n): google.maps.LatLngLiteral {\n  if (isLatLngLiteral(obj)) return obj;\n\n  return obj.toJSON();\n}\n","import {useLayoutEffect} from 'react';\nimport {CameraStateRef} from './use-tracked-camera-state-ref';\nimport {toLatLngLiteral} from '../../libraries/lat-lng-utils';\nimport {MapProps} from '../map';\n\nexport function useMapCameraParams(\n  map: google.maps.Map | null,\n  cameraStateRef: CameraStateRef,\n  mapProps: MapProps\n) {\n  const center = mapProps.center ? toLatLngLiteral(mapProps.center) : null;\n\n  let lat: number | null = null;\n  let lng: number | null = null;\n\n  if (center && Number.isFinite(center.lat) && Number.isFinite(center.lng)) {\n    lat = center.lat as number;\n    lng = center.lng as number;\n  }\n\n  const zoom: number | null = Number.isFinite(mapProps.zoom)\n    ? (mapProps.zoom as number)\n    : null;\n  const heading: number | null = Number.isFinite(mapProps.heading)\n    ? (mapProps.heading as number)\n    : null;\n  const tilt: number | null = Number.isFinite(mapProps.tilt)\n    ? (mapProps.tilt as number)\n    : null;\n\n  // the following effect runs for every render of the map component and checks\n  // if there are differences between the known state of the map instance\n  // (cameraStateRef, which is updated by all bounds_changed events) and the\n  // desired state in the props.\n\n  useLayoutEffect(() => {\n    if (!map) return;\n\n    const nextCamera: google.maps.CameraOptions = {};\n    let needsUpdate = false;\n\n    if (\n      lat !== null &&\n      lng !== null &&\n      (cameraStateRef.current.center.lat !== lat ||\n        cameraStateRef.current.center.lng !== lng)\n    ) {\n      nextCamera.center = {lat, lng};\n      needsUpdate = true;\n    }\n\n    if (zoom !== null && cameraStateRef.current.zoom !== zoom) {\n      nextCamera.zoom = zoom as number;\n      needsUpdate = true;\n    }\n\n    if (heading !== null && cameraStateRef.current.heading !== heading) {\n      nextCamera.heading = heading as number;\n      needsUpdate = true;\n    }\n\n    if (tilt !== null && cameraStateRef.current.tilt !== tilt) {\n      nextCamera.tilt = tilt as number;\n      needsUpdate = true;\n    }\n\n    if (needsUpdate) {\n      map.moveCamera(nextCamera);\n    }\n  });\n}\n","import React, {CSSProperties, FunctionComponent} from 'react';\n\nexport const AuthFailureMessage: FunctionComponent = () => {\n  const style: CSSProperties = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 999,\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    textAlign: 'center',\n    justifyContent: 'center',\n    fontSize: '.8rem',\n    color: 'rgba(0,0,0,0.6)',\n    background: '#dddddd',\n    padding: '1rem 1.5rem'\n  };\n\n  return (\n    <div style={style}>\n      <h2>Error: AuthFailure</h2>\n      <p>\n        A problem with your API key prevents the map from rendering correctly.\n        Please make sure the value of the <code>APIProvider.apiKey</code> prop\n        is correct. Check the error-message in the console for further details.\n      </p>\n    </div>\n  );\n};\n","import {Ref, useCallback, useState} from 'react';\n\nexport function useCallbackRef<T>() {\n  const [el, setEl] = useState<T | null>(null);\n  const ref = useCallback((value: T) => setEl(value), [setEl]);\n\n  return [el, ref as Ref<T>] as const;\n}\n","import {useApiLoadingStatus} from './use-api-loading-status';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n/**\n * Hook to check if the Maps JavaScript API is loaded\n */\nexport function useApiIsLoaded(): boolean {\n  const status = useApiLoadingStatus();\n\n  return status === APILoadingStatus.LOADED;\n}\n","import {useReducer} from 'react';\n\nexport function useForceUpdate(): () => void {\n  const [, forceUpdate] = useReducer(x => x + 1, 0);\n\n  return forceUpdate;\n}\n","import {MutableRefObject, useEffect, useRef} from 'react';\nimport {useForceUpdate} from '../../libraries/use-force-update';\n\nexport type CameraState = {\n  center: google.maps.LatLngLiteral;\n  heading: number;\n  tilt: number;\n  zoom: number;\n};\n\nexport type CameraStateRef = MutableRefObject<CameraState>;\n\nfunction handleBoundsChange(map: google.maps.Map, ref: CameraStateRef) {\n  const center = map.getCenter();\n  const zoom = map.getZoom();\n  const heading = map.getHeading() || 0;\n  const tilt = map.getTilt() || 0;\n  const bounds = map.getBounds();\n\n  if (!center || !bounds || !Number.isFinite(zoom)) {\n    console.warn(\n      '[useTrackedCameraState] at least one of the values from the map ' +\n        'returned undefined. This is not expected to happen. Please ' +\n        'report an issue at https://github.com/visgl/react-google-maps/issues/new'\n    );\n  }\n\n  // fixme: do we need the `undefined` cases for the camera-params? When are they used in the maps API?\n  Object.assign(ref.current, {\n    center: center?.toJSON() || {lat: 0, lng: 0},\n    zoom: (zoom as number) || 0,\n    heading: heading as number,\n    tilt: tilt as number\n  });\n}\n\n/**\n * Creates a mutable ref object to track the last known state of the map camera.\n * This is used in `useMapCameraParams` to reduce stuttering in normal operation\n * by avoiding updates of the map camera with values that have already been processed.\n */\nexport function useTrackedCameraStateRef(\n  map: google.maps.Map | null\n): CameraStateRef {\n  const forceUpdate = useForceUpdate();\n  const ref = useRef<CameraState>({\n    center: {lat: 0, lng: 0},\n    heading: 0,\n    tilt: 0,\n    zoom: 0\n  });\n\n  // Record camera state with every bounds_changed event dispatched by the map.\n  // This data is used to prevent feeding these values back to the\n  // map-instance when a typical \"controlled component\" setup (state variable is\n  // fed into and updated by the map).\n  useEffect(() => {\n    if (!map) return;\n\n    const listener = google.maps.event.addListener(\n      map,\n      'bounds_changed',\n      () => {\n        handleBoundsChange(map, ref);\n\n        // When an event is occured, we have to update during the next cycle.\n        // The application could decide to ignore the event and not update any\n        // camera props of the map, meaning that in that case we will have to\n        // 'undo' the change to the camera.\n        forceUpdate();\n      }\n    );\n\n    return () => listener.remove();\n  }, [map, forceUpdate]);\n\n  return ref;\n}\n","import {Ref, useEffect, useRef, useState} from 'react';\n\nimport {MapProps} from '../map';\nimport {APIProviderContextValue} from '../api-provider';\n\nimport {useCallbackRef} from '../../libraries/use-callback-ref';\nimport {useApiIsLoaded} from '../../hooks/use-api-is-loaded';\nimport {\n  CameraState,\n  CameraStateRef,\n  useTrackedCameraStateRef\n} from './use-tracked-camera-state-ref';\n\n/**\n * Stores a stack of map-instances for each mapId. Whenever an\n * instance is used, it is removed from the stack while in use,\n * and returned to the stack when the component unmounts.\n * This allows us to correctly implement caching for multiple\n * maps om the same page, while reusing as much as possible.\n *\n * FIXME: while it should in theory be possible to reuse maps solely\n *   based on the mapId (as all other parameters can be changed at\n *   runtime), we don't yet have good enough tracking of options to\n *   reliably unset all the options that have been set.\n */\nclass CachedMapStack {\n  static entries: {[key: string]: google.maps.Map[]} = {};\n\n  static has(key: string) {\n    return this.entries[key] && this.entries[key].length > 0;\n  }\n\n  static pop(key: string) {\n    if (!this.entries[key]) return null;\n\n    return this.entries[key].pop() || null;\n  }\n\n  static push(key: string, value: google.maps.Map) {\n    if (!this.entries[key]) this.entries[key] = [];\n\n    this.entries[key].push(value);\n  }\n}\n\n/**\n * The main hook takes care of creating map-instances and registering them in\n * the api-provider context.\n * @return a tuple of the map-instance created (or null) and the callback\n *   ref that will be used to pass the map-container into this hook.\n * @internal\n */\nexport function useMapInstance(\n  props: MapProps,\n  context: APIProviderContextValue\n): readonly [\n  map: google.maps.Map | null,\n  containerRef: Ref<HTMLDivElement>,\n  cameraStateRef: CameraStateRef\n] {\n  const apiIsLoaded = useApiIsLoaded();\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [container, containerRef] = useCallbackRef<HTMLDivElement>();\n\n  const cameraStateRef = useTrackedCameraStateRef(map);\n\n  const {\n    id,\n    defaultBounds,\n    defaultCenter,\n    defaultZoom,\n    defaultHeading,\n    defaultTilt,\n    reuseMaps,\n    renderingType,\n    colorScheme,\n\n    ...mapOptions\n  } = props;\n\n  const hasZoom = props.zoom !== undefined || props.defaultZoom !== undefined;\n  const hasCenter =\n    props.center !== undefined || props.defaultCenter !== undefined;\n\n  if (!defaultBounds && (!hasZoom || !hasCenter)) {\n    console.warn(\n      '<Map> component is missing configuration. ' +\n        'You have to provide zoom and center (via the `zoom`/`defaultZoom` and ' +\n        '`center`/`defaultCenter` props) or specify the region to show using ' +\n        '`defaultBounds`. See ' +\n        'https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required'\n    );\n  }\n\n  // apply default camera props if available and not overwritten by controlled props\n  if (!mapOptions.center && defaultCenter) mapOptions.center = defaultCenter;\n  if (!mapOptions.zoom && Number.isFinite(defaultZoom))\n    mapOptions.zoom = defaultZoom;\n  if (!mapOptions.heading && Number.isFinite(defaultHeading))\n    mapOptions.heading = defaultHeading;\n  if (!mapOptions.tilt && Number.isFinite(defaultTilt))\n    mapOptions.tilt = defaultTilt;\n\n  for (const key of Object.keys(mapOptions) as (keyof typeof mapOptions)[])\n    if (mapOptions[key] === undefined) delete mapOptions[key];\n\n  const savedMapStateRef = useRef<{\n    mapId?: string | null;\n    cameraState: CameraState;\n  }>(undefined);\n\n  // create the map instance and register it in the context\n  useEffect(\n    () => {\n      if (!container || !apiIsLoaded) return;\n\n      const {addMapInstance, removeMapInstance} = context;\n\n      // note: colorScheme (upcoming feature) isn't yet in the typings, remove once that is fixed:\n      const {mapId} = props;\n      const cacheKey = `${mapId || 'default'}:${renderingType || 'default'}:${colorScheme || 'LIGHT'}`;\n\n      let mapDiv: HTMLElement;\n      let map: google.maps.Map;\n\n      if (reuseMaps && CachedMapStack.has(cacheKey)) {\n        map = CachedMapStack.pop(cacheKey) as google.maps.Map;\n        mapDiv = map.getDiv();\n\n        container.appendChild(mapDiv);\n        map.setOptions(mapOptions);\n\n        // detaching the element from the DOM lets the map fall back to its default\n        // size, setting the center will trigger reloading the map.\n        setTimeout(() => map.setCenter(map.getCenter()!), 0);\n      } else {\n        mapDiv = document.createElement('div');\n        mapDiv.style.height = '100%';\n        container.appendChild(mapDiv);\n\n        map = new google.maps.Map(mapDiv, {\n          ...mapOptions,\n          ...(renderingType\n            ? {renderingType: renderingType as google.maps.RenderingType}\n            : {}),\n          ...(colorScheme\n            ? {colorScheme: colorScheme as google.maps.ColorScheme}\n            : {})\n        });\n      }\n\n      setMap(map);\n      addMapInstance(map, id);\n\n      if (defaultBounds) {\n        const {padding, ...defBounds} = defaultBounds;\n        map.fitBounds(defBounds, padding);\n      }\n\n      // prevent map not rendering due to missing configuration\n      else if (!hasZoom || !hasCenter) {\n        map.fitBounds({east: 180, west: -180, south: -90, north: 90});\n      }\n\n      // the savedMapState is used to restore the camera parameters when the mapId is changed\n      if (savedMapStateRef.current) {\n        const {mapId: savedMapId, cameraState: savedCameraState} =\n          savedMapStateRef.current;\n        if (savedMapId !== mapId) {\n          map.setOptions(savedCameraState);\n        }\n      }\n\n      return () => {\n        savedMapStateRef.current = {\n          mapId,\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          cameraState: cameraStateRef.current\n        };\n\n        // detach the map-div from the dom\n        mapDiv.remove();\n\n        if (reuseMaps) {\n          // push back on the stack\n          CachedMapStack.push(cacheKey, map);\n        } else {\n          // remove all event-listeners to minimize the possibility of memory-leaks\n          google.maps.event.clearInstanceListeners(map);\n        }\n\n        setMap(null);\n        removeMapInstance(id);\n      };\n    },\n\n    // some dependencies are ignored in the list below:\n    //  - defaultBounds and the default* camera props will only be used once, and\n    //    changes should be ignored\n    //  - mapOptions has special hooks that take care of updating the options\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      container,\n      apiIsLoaded,\n      id,\n\n      // these props can't be changed after initialization and require a new\n      // instance to be created\n      props.mapId,\n      props.renderingType,\n      props.colorScheme\n    ]\n  );\n\n  return [map, containerRef, cameraStateRef] as const;\n}\n","/* eslint-disable complexity */\nimport React, {\n  CSSProperties,\n  FunctionComponent,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useMemo\n} from 'react';\n\nimport {APIProviderContext} from '../api-provider';\n\nimport {MapEventProps, useMapEvents} from './use-map-events';\nimport {useMapOptions} from './use-map-options';\nimport {useApiLoadingStatus} from '../../hooks/use-api-loading-status';\nimport {APILoadingStatus} from '../../libraries/api-loading-status';\nimport {\n  DeckGlCompatProps,\n  useDeckGLCameraUpdate\n} from './use-deckgl-camera-update';\nimport {toLatLngLiteral} from '../../libraries/lat-lng-utils';\nimport {useMapCameraParams} from './use-map-camera-params';\nimport {AuthFailureMessage} from './auth-failure-message';\nimport {useMapInstance} from './use-map-instance';\n\nexport interface GoogleMapsContextValue {\n  map: google.maps.Map | null;\n}\nexport const GoogleMapsContext =\n  React.createContext<GoogleMapsContextValue | null>(null);\n\nexport type {\n  MapCameraChangedEvent,\n  MapEvent,\n  MapEventProps,\n  MapMouseEvent\n} from './use-map-events';\n\nexport type MapCameraProps = {\n  center: google.maps.LatLngLiteral;\n  zoom: number;\n  heading?: number;\n  tilt?: number;\n};\n\n// ColorScheme and RenderingType are redefined here to make them usable before the\n// maps API has been fully loaded.\n\nexport const ColorScheme = {\n  DARK: 'DARK',\n  LIGHT: 'LIGHT',\n  FOLLOW_SYSTEM: 'FOLLOW_SYSTEM'\n} as const;\nexport type ColorScheme = (typeof ColorScheme)[keyof typeof ColorScheme];\n\nexport const RenderingType = {\n  VECTOR: 'VECTOR',\n  RASTER: 'RASTER',\n  UNINITIALIZED: 'UNINITIALIZED'\n} as const;\nexport type RenderingType = (typeof RenderingType)[keyof typeof RenderingType];\n\n/**\n * Props for the Map Component\n */\nexport type MapProps = PropsWithChildren<\n  Omit<google.maps.MapOptions, 'renderingType' | 'colorScheme'> &\n    MapEventProps &\n    DeckGlCompatProps & {\n      /**\n       * An id for the map, this is required when multiple maps are present\n       * in the same APIProvider context.\n       */\n      id?: string;\n\n      /**\n       * Additional style rules to apply to the map dom-element.\n       */\n      style?: CSSProperties;\n\n      /**\n       * Additional css class-name to apply to the element containing the map.\n       */\n      className?: string;\n\n      /**\n       * The color-scheme to use for the map.\n       */\n      colorScheme?: ColorScheme;\n\n      /**\n       * The rendering-type to be used.\n       */\n      renderingType?: RenderingType;\n\n      /**\n       * Indicates that the map will be controlled externally. Disables all controls provided by the map itself.\n       */\n      controlled?: boolean;\n\n      /**\n       * Enable caching of map-instances created by this component.\n       */\n      reuseMaps?: boolean;\n\n      defaultCenter?: google.maps.LatLngLiteral;\n      defaultZoom?: number;\n      defaultHeading?: number;\n      defaultTilt?: number;\n      /**\n       * Alternative way to specify the default camera props as a geographic region that should be fully visible\n       */\n      defaultBounds?: google.maps.LatLngBoundsLiteral & {\n        padding?: number | google.maps.Padding;\n      };\n    }\n>;\n\nexport const Map: FunctionComponent<MapProps> = (props: MapProps) => {\n  const {children, id, className, style} = props;\n  const context = useContext(APIProviderContext);\n  const loadingStatus = useApiLoadingStatus();\n\n  if (!context) {\n    throw new Error(\n      '<Map> can only be used inside an <ApiProvider> component.'\n    );\n  }\n\n  const [map, mapRef, cameraStateRef] = useMapInstance(props, context);\n\n  useMapCameraParams(map, cameraStateRef, props);\n  useMapEvents(map, props);\n  useMapOptions(map, props);\n\n  const isDeckGlControlled = useDeckGLCameraUpdate(map, props);\n  const isControlledExternally = !!props.controlled;\n\n  // disable interactions with the map for externally controlled maps\n  useEffect(() => {\n    if (!map) return;\n\n    // fixme: this doesn't seem to belong here (and it's mostly there for convenience anyway).\n    //   The reasoning is that a deck.gl canvas will be put on top of the map, rendering\n    //   any default map controls pretty much useless\n    if (isDeckGlControlled) {\n      map.setOptions({disableDefaultUI: true});\n    }\n\n    // disable all control-inputs when the map is controlled externally\n    if (isDeckGlControlled || isControlledExternally) {\n      map.setOptions({\n        gestureHandling: 'none',\n        keyboardShortcuts: false\n      });\n    }\n\n    return () => {\n      map.setOptions({\n        gestureHandling: props.gestureHandling,\n        keyboardShortcuts: props.keyboardShortcuts\n      });\n    };\n  }, [\n    map,\n    isDeckGlControlled,\n    isControlledExternally,\n    props.gestureHandling,\n    props.keyboardShortcuts\n  ]);\n\n  // setup a stable cameraOptions object that can be used as dependency\n  const center = props.center ? toLatLngLiteral(props.center) : null;\n  let lat: number | null = null;\n  let lng: number | null = null;\n  if (center && Number.isFinite(center.lat) && Number.isFinite(center.lng)) {\n    lat = center.lat as number;\n    lng = center.lng as number;\n  }\n\n  const cameraOptions: google.maps.CameraOptions = useMemo(() => {\n    return {\n      center: {lat: lat ?? 0, lng: lng ?? 0},\n      zoom: props.zoom ?? 0,\n      heading: props.heading ?? 0,\n      tilt: props.tilt ?? 0\n    };\n  }, [lat, lng, props.zoom, props.heading, props.tilt]);\n\n  // externally controlled mode: reject all camera changes that don't correspond to changes in props\n  useLayoutEffect(() => {\n    if (!map || !isControlledExternally) return;\n\n    map.moveCamera(cameraOptions);\n    const listener = map.addListener('bounds_changed', () => {\n      map.moveCamera(cameraOptions);\n    });\n\n    return () => listener.remove();\n  }, [map, isControlledExternally, cameraOptions]);\n\n  const combinedStyle: CSSProperties = useMemo(\n    () => ({\n      width: '100%',\n      height: '100%',\n      position: 'relative',\n      // when using deckgl, the map should be sent to the back\n      zIndex: isDeckGlControlled ? -1 : 0,\n\n      ...style\n    }),\n    [style, isDeckGlControlled]\n  );\n\n  const contextValue: GoogleMapsContextValue = useMemo(() => ({map}), [map]);\n\n  if (loadingStatus === APILoadingStatus.AUTH_FAILURE) {\n    return (\n      <div\n        style={{position: 'relative', ...(className ? {} : combinedStyle)}}\n        className={className}>\n        <AuthFailureMessage />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={mapRef}\n      data-testid={'map'}\n      style={className ? undefined : combinedStyle}\n      className={className}\n      {...(id ? {id} : {})}>\n      {map ? (\n        <GoogleMapsContext.Provider value={contextValue}>\n          {children}\n        </GoogleMapsContext.Provider>\n      ) : null}\n    </div>\n  );\n};\n\n// The deckGLViewProps flag here indicates to deck.gl that the Map component is\n// able to handle viewProps from deck.gl when deck.gl is used to control the map.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n(Map as any).deckGLViewProps = true;\n","const shownMessages = new Set();\n\nexport function logErrorOnce(...args: Parameters<typeof console.error>) {\n  const key = JSON.stringify(args);\n\n  if (!shownMessages.has(key)) {\n    shownMessages.add(key);\n\n    console.error(...args);\n  }\n}\n","import {useContext} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {GoogleMapsContext} from '../components/map';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Retrieves a map-instance from the context. This is either an instance\n * identified by id or the parent map instance if no id is specified.\n * Returns null if neither can be found.\n */\nexport const useMap = (id: string | null = null): google.maps.Map | null => {\n  const ctx = useContext(APIProviderContext);\n  const {map} = useContext(GoogleMapsContext) || {};\n\n  if (ctx === null) {\n    logErrorOnce(\n      'useMap(): failed to retrieve APIProviderContext. ' +\n        'Make sure that the <APIProvider> component exists and that the ' +\n        'component you are calling `useMap()` from is a sibling of the ' +\n        '<APIProvider>.'\n    );\n\n    return null;\n  }\n\n  const {mapInstances} = ctx;\n\n  // if an id is specified, the corresponding map or null is returned\n  if (id !== null) return mapInstances[id] || null;\n\n  // otherwise, return the closest ancestor\n  if (map) return map;\n\n  // finally, return the default map instance\n  return mapInstances['default'] || null;\n};\n","import {useContext, useEffect} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {useApiIsLoaded} from './use-api-is-loaded';\n\ninterface ApiLibraries {\n  core: google.maps.CoreLibrary;\n  maps: google.maps.MapsLibrary;\n  places: google.maps.PlacesLibrary;\n  geocoding: google.maps.GeocodingLibrary;\n  routes: google.maps.RoutesLibrary;\n  marker: google.maps.MarkerLibrary;\n  geometry: google.maps.GeometryLibrary;\n  elevation: google.maps.ElevationLibrary;\n  streetView: google.maps.StreetViewLibrary;\n  journeySharing: google.maps.JourneySharingLibrary;\n  drawing: google.maps.DrawingLibrary;\n  visualization: google.maps.VisualizationLibrary;\n}\n\nexport function useMapsLibrary<\n  K extends keyof ApiLibraries,\n  V extends ApiLibraries[K]\n>(name: K): V | null;\n\nexport function useMapsLibrary(name: string) {\n  const apiIsLoaded = useApiIsLoaded();\n  const ctx = useContext(APIProviderContext);\n\n  useEffect(() => {\n    if (!apiIsLoaded || !ctx) return;\n\n    // Trigger loading the libraries via our proxy-method.\n    // The returned promise is ignored, since importLibrary will update loadedLibraries\n    // list in the context, triggering a re-render.\n    void ctx.importLibrary(name);\n  }, [apiIsLoaded, ctx, name]);\n\n  return ctx?.loadedLibraries[name] || null;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {useEffect} from 'react';\n\n/**\n * Internally used to bind events to Maps JavaScript API objects.\n * @internal\n */\nexport function useMapsEventListener<T extends (...args: any[]) => void>(\n  target?: object | null,\n  name?: string,\n  callback?: T | null\n) {\n  useEffect(() => {\n    if (!target || !name || !callback) return;\n\n    const listener = google.maps.event.addListener(target, name, callback);\n\n    return () => listener.remove();\n  }, [target, name, callback]);\n}\n","import {useEffect} from 'react';\n\n/**\n * Internally used to copy values from props into API-Objects\n * whenever they change.\n *\n * @example\n *   usePropBinding(marker, 'position', position);\n *\n * @internal\n */\nexport function usePropBinding<T extends object, K extends keyof T>(\n  object: T | null,\n  prop: K,\n  value: T[K]\n) {\n  useEffect(() => {\n    if (!object) return;\n\n    object[prop] = value;\n  }, [object, prop, value]);\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {useEffect} from 'react';\n\n/**\n * Internally used to bind events to DOM nodes.\n * @internal\n */\nexport function useDomEventListener<T extends (...args: any[]) => void>(\n  target?: Node | null,\n  name?: string,\n  callback?: T | null\n) {\n  useEffect(() => {\n    if (!target || !name || !callback) return;\n\n    target.addEventListener(name, callback);\n\n    return () => target.removeEventListener(name, callback);\n  }, [target, name, callback]);\n}\n","/* eslint-disable complexity */\nimport React, {\n  Children,\n  CSSProperties,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useState\n} from 'react';\n\nimport {createPortal} from 'react-dom';\nimport {useMap} from '../hooks/use-map';\nimport {useMapsLibrary} from '../hooks/use-maps-library';\n\nimport type {Ref, PropsWithChildren} from 'react';\nimport {useMapsEventListener} from '../hooks/use-maps-event-listener';\nimport {usePropBinding} from '../hooks/use-prop-binding';\nimport {useDomEventListener} from '../hooks/use-dom-event-listener';\n\nexport interface AdvancedMarkerContextValue {\n  marker: google.maps.marker.AdvancedMarkerElement;\n}\n\nexport function isAdvancedMarker(\n  marker: google.maps.Marker | google.maps.marker.AdvancedMarkerElement\n): marker is google.maps.marker.AdvancedMarkerElement {\n  return (\n    (marker as google.maps.marker.AdvancedMarkerElement).content !== undefined\n  );\n}\n\nfunction isElementNode(node: Node): node is HTMLElement {\n  return node.nodeType === Node.ELEMENT_NODE;\n}\n\n/**\n * Copy of the `google.maps.CollisionBehavior` constants.\n * They have to be duplicated here since we can't wait for the maps API to load to be able to use them.\n */\nexport const CollisionBehavior = {\n  REQUIRED: 'REQUIRED',\n  REQUIRED_AND_HIDES_OPTIONAL: 'REQUIRED_AND_HIDES_OPTIONAL',\n  OPTIONAL_AND_HIDES_LOWER_PRIORITY: 'OPTIONAL_AND_HIDES_LOWER_PRIORITY'\n} as const;\nexport type CollisionBehavior =\n  (typeof CollisionBehavior)[keyof typeof CollisionBehavior];\n\nexport const AdvancedMarkerContext =\n  React.createContext<AdvancedMarkerContextValue | null>(null);\n\n// [xPosition, yPosition] when the top left corner is [0, 0]\nexport const AdvancedMarkerAnchorPoint = {\n  TOP_LEFT: ['0%', '0%'],\n  TOP_CENTER: ['50%', '0%'],\n  TOP: ['50%', '0%'],\n  TOP_RIGHT: ['100%', '0%'],\n  LEFT_CENTER: ['0%', '50%'],\n  LEFT_TOP: ['0%', '0%'],\n  LEFT: ['0%', '50%'],\n  LEFT_BOTTOM: ['0%', '100%'],\n  RIGHT_TOP: ['100%', '0%'],\n  RIGHT: ['100%', '50%'],\n  RIGHT_CENTER: ['100%', '50%'],\n  RIGHT_BOTTOM: ['100%', '100%'],\n  BOTTOM_LEFT: ['0%', '100%'],\n  BOTTOM_CENTER: ['50%', '100%'],\n  BOTTOM: ['50%', '100%'],\n  BOTTOM_RIGHT: ['100%', '100%'],\n  CENTER: ['50%', '50%']\n} as const;\n\nexport type AdvancedMarkerAnchorPoint =\n  (typeof AdvancedMarkerAnchorPoint)[keyof typeof AdvancedMarkerAnchorPoint];\n\ntype AdvancedMarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onMouseEnter?: (e: google.maps.MapMouseEvent['domEvent']) => void;\n  onMouseLeave?: (e: google.maps.MapMouseEvent['domEvent']) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type AdvancedMarkerProps = PropsWithChildren<\n  Omit<\n    google.maps.marker.AdvancedMarkerElementOptions,\n    'gmpDraggable' | 'gmpClickable' | 'content' | 'map' | 'collisionBehavior'\n  > &\n    AdvancedMarkerEventProps & {\n      draggable?: boolean;\n      clickable?: boolean;\n      collisionBehavior?: CollisionBehavior;\n      /**\n       * The anchor point for the Advanced Marker.\n       * Either use one of the predefined anchor point from the \"AdvancedMarkerAnchorPoint\" export\n       * or provide a string tuple in the form of [\"xPosition\", \"yPosition\"].\n       * The position is measured from the top-left corner and\n       * can be anything that can be consumed by a CSS translate() function.\n       * For example in percent (\"50%\") or in pixels (\"20px\").\n       */\n      anchorPoint?: AdvancedMarkerAnchorPoint | [string, string];\n      /**\n       * A className for the content element.\n       * (can only be used with HTML Marker content)\n       */\n      className?: string;\n      /**\n       * Additional styles to apply to the content element.\n       */\n      style?: CSSProperties;\n    }\n>;\n\ntype MarkerContentProps = PropsWithChildren & {\n  styles?: CSSProperties;\n  className?: string;\n  anchorPoint?: AdvancedMarkerAnchorPoint | [string, string];\n};\n\nconst MarkerContent = ({\n  children,\n  styles,\n  className,\n  anchorPoint\n}: MarkerContentProps) => {\n  const [xTranslation, yTranslation] =\n    anchorPoint ?? AdvancedMarkerAnchorPoint['BOTTOM'];\n\n  let xTranslationFlipped = `-${xTranslation}`;\n  let yTranslationFlipped = `-${yTranslation}`;\n  if (xTranslation.trimStart().startsWith('-')) {\n    xTranslationFlipped = xTranslation.substring(1);\n  }\n  if (yTranslation.trimStart().startsWith('-')) {\n    yTranslationFlipped = yTranslation.substring(1);\n  }\n\n  // The \"translate(50%, 100%)\" is here to counter and reset the default anchoring of the advanced marker element\n  // that comes from the api\n  const transformStyle = `translate(50%, 100%) translate(${xTranslationFlipped}, ${yTranslationFlipped})`;\n\n  return (\n    // anchoring container\n    <div style={{transform: transformStyle}}>\n      {/* AdvancedMarker div that user can give styles and classes */}\n      <div className={className} style={styles}>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport type CustomMarkerContent =\n  | (HTMLDivElement & {isCustomMarker?: boolean})\n  | null;\n\nexport type AdvancedMarkerRef = google.maps.marker.AdvancedMarkerElement | null;\nfunction useAdvancedMarker(props: AdvancedMarkerProps) {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n  const [contentContainer, setContentContainer] =\n    useState<HTMLDivElement | null>(null);\n\n  const map = useMap();\n  const markerLibrary = useMapsLibrary('marker');\n\n  const {\n    children,\n    onClick,\n    className,\n    onMouseEnter,\n    onMouseLeave,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    collisionBehavior,\n    clickable,\n    draggable,\n    position,\n    title,\n    zIndex\n  } = props;\n\n  const numChildren = Children.count(children);\n\n  // create an AdvancedMarkerElement instance and add it to the map once available\n  useEffect(() => {\n    if (!map || !markerLibrary) return;\n\n    const newMarker = new markerLibrary.AdvancedMarkerElement();\n    newMarker.map = map;\n\n    setMarker(newMarker);\n\n    // create the container for marker content if there are children\n    let contentElement: CustomMarkerContent = null;\n    if (numChildren > 0) {\n      contentElement = document.createElement('div');\n\n      // We need some kind of flag to identify the custom marker content\n      // in the infowindow component. Choosing a custom property instead of a className\n      // to not encourage users to style the marker content directly.\n      contentElement.isCustomMarker = true;\n\n      newMarker.content = contentElement;\n      setContentContainer(contentElement);\n    }\n\n    return () => {\n      newMarker.map = null;\n      contentElement?.remove();\n      setMarker(null);\n      setContentContainer(null);\n    };\n  }, [map, markerLibrary, numChildren]);\n\n  // When no children are present we don't have our own wrapper div\n  // which usually gets the user provided className. In this case\n  // we set the className directly on the marker.content element that comes\n  // with the AdvancedMarker.\n  useEffect(() => {\n    if (!marker || !marker.content || numChildren > 0) return;\n\n    (marker.content as HTMLElement).className = className || '';\n  }, [marker, className, numChildren]);\n\n  // copy other props\n  usePropBinding(marker, 'position', position);\n  usePropBinding(marker, 'title', title ?? '');\n  usePropBinding(marker, 'zIndex', zIndex);\n  usePropBinding(\n    marker,\n    'collisionBehavior',\n    collisionBehavior as google.maps.CollisionBehavior\n  );\n\n  // set gmpDraggable from props (when unspecified, it's true if any drag-event\n  // callbacks are specified)\n  useEffect(() => {\n    if (!marker) return;\n\n    if (draggable !== undefined) marker.gmpDraggable = draggable;\n    else if (onDrag || onDragStart || onDragEnd) marker.gmpDraggable = true;\n    else marker.gmpDraggable = false;\n  }, [marker, draggable, onDrag, onDragEnd, onDragStart]);\n\n  // set gmpClickable from props (when unspecified, it's true if the onClick or one of\n  // the hover events callbacks are specified)\n  useEffect(() => {\n    if (!marker) return;\n\n    const gmpClickable =\n      clickable !== undefined ||\n      Boolean(onClick) ||\n      Boolean(onMouseEnter) ||\n      Boolean(onMouseLeave);\n\n    // gmpClickable is only available in beta version of the\n    // maps api (as of 2024-10-10)\n    marker.gmpClickable = gmpClickable;\n\n    // enable pointer events for the markers with custom content\n    if (gmpClickable && marker?.content && isElementNode(marker.content)) {\n      marker.content.style.pointerEvents = 'none';\n\n      if (marker.content.firstElementChild) {\n        (marker.content.firstElementChild as HTMLElement).style.pointerEvents =\n          'all';\n      }\n    }\n  }, [marker, clickable, onClick, onMouseEnter, onMouseLeave]);\n\n  useMapsEventListener(marker, 'click', onClick);\n  useMapsEventListener(marker, 'drag', onDrag);\n  useMapsEventListener(marker, 'dragstart', onDragStart);\n  useMapsEventListener(marker, 'dragend', onDragEnd);\n\n  useDomEventListener(marker?.element, 'mouseenter', onMouseEnter);\n  useDomEventListener(marker?.element, 'mouseleave', onMouseLeave);\n\n  return [marker, contentContainer] as const;\n}\n\nexport const AdvancedMarker = forwardRef(\n  (props: AdvancedMarkerProps, ref: Ref<AdvancedMarkerRef>) => {\n    const {children, style, className, anchorPoint} = props;\n    const [marker, contentContainer] = useAdvancedMarker(props);\n\n    const advancedMarkerContextValue: AdvancedMarkerContextValue | null =\n      useMemo(() => (marker ? {marker} : null), [marker]);\n\n    useImperativeHandle(\n      ref,\n      () => marker as google.maps.marker.AdvancedMarkerElement,\n      [marker]\n    );\n\n    if (!contentContainer) return null;\n\n    return (\n      <AdvancedMarkerContext.Provider value={advancedMarkerContextValue}>\n        {createPortal(\n          <MarkerContent\n            anchorPoint={anchorPoint}\n            styles={style}\n            className={className}>\n            {children}\n          </MarkerContent>,\n          contentContainer\n        )}\n      </AdvancedMarkerContext.Provider>\n    );\n  }\n);\n\nexport function useAdvancedMarkerRef() {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n\n  const refCallback = useCallback((m: AdvancedMarkerRef | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/*\n * The code in this file was adapted from the internal react-dom-bindings package.\n * https://github.com/facebook/react/tree/4508873393058e86bed308b56e49ec883ece59d1/packages/react-dom-bindings\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport {CSSProperties} from 'react';\n\nexport function setValueForStyles(\n  element: HTMLElement,\n  styles: CSSProperties | null,\n  prevStyles: CSSProperties | null\n) {\n  if (styles != null && typeof styles !== 'object') {\n    throw new Error(\n      'The `style` prop expects a mapping from style properties to values, ' +\n        \"not a string. For example, style={{marginRight: spacing + 'em'}} when \" +\n        'using JSX.'\n    );\n  }\n\n  const elementStyle = element.style;\n\n  // without `prevStyles`, just set all values\n  if (prevStyles == null) {\n    if (styles == null) return;\n\n    for (const styleName in styles) {\n      if (!styles.hasOwnProperty(styleName)) continue;\n\n      setValueForStyle(\n        elementStyle,\n        styleName,\n        styles[styleName as keyof CSSProperties]\n      );\n    }\n\n    return;\n  }\n\n  // unset all styles in `prevStyles` that aren't in `styles`\n  for (const styleName in prevStyles) {\n    if (\n      prevStyles.hasOwnProperty(styleName) &&\n      (styles == null || !styles.hasOwnProperty(styleName))\n    ) {\n      // Clear style\n      const isCustomProperty = styleName.indexOf('--') === 0;\n      if (isCustomProperty) {\n        elementStyle.setProperty(styleName, '');\n      } else if (styleName === 'float') {\n        elementStyle.cssFloat = '';\n      } else {\n        elementStyle[styleName as any] = '';\n      }\n    }\n  }\n\n  // only assign values from `styles` that are different from `prevStyles`\n  if (styles == null) return;\n\n  for (const styleName in styles) {\n    const value = styles[styleName as keyof CSSProperties];\n    if (\n      styles.hasOwnProperty(styleName) &&\n      prevStyles[styleName as keyof CSSProperties] !== value\n    ) {\n      setValueForStyle(elementStyle, styleName, value);\n    }\n  }\n}\n\nfunction setValueForStyle(\n  elementStyle: CSSStyleDeclaration,\n  styleName: string,\n  value: unknown\n) {\n  const isCustomProperty = styleName.indexOf('--') === 0;\n\n  // falsy values will unset the style property\n  if (value == null || typeof value === 'boolean' || value === '') {\n    if (isCustomProperty) {\n      elementStyle.setProperty(styleName, '');\n    } else if (styleName === 'float') {\n      elementStyle.cssFloat = '';\n    } else {\n      elementStyle[styleName as any] = '';\n    }\n  }\n\n  // custom properties can't be directly assigned\n  else if (isCustomProperty) {\n    elementStyle.setProperty(styleName, value as string);\n  }\n\n  // numeric values are treated as 'px' unless the style property expects unitless numbers\n  else if (\n    typeof value === 'number' &&\n    value !== 0 &&\n    !isUnitlessNumber(styleName)\n  ) {\n    elementStyle[styleName as any] = value + 'px'; // Presumes implicit 'px' suffix for unitless numbers\n  }\n\n  // everything else can just be assigned\n  else {\n    if (styleName === 'float') {\n      elementStyle.cssFloat = value as string;\n    } else {\n      elementStyle[styleName as any] = ('' + value).trim();\n    }\n  }\n}\n\n// CSS properties which accept numbers but are not in units of \"px\".\nconst unitlessNumbers = new Set([\n  'animationIterationCount',\n  'aspectRatio',\n  'borderImageOutset',\n  'borderImageSlice',\n  'borderImageWidth',\n  'boxFlex',\n  'boxFlexGroup',\n  'boxOrdinalGroup',\n  'columnCount',\n  'columns',\n  'flex',\n  'flexGrow',\n  'flexPositive',\n  'flexShrink',\n  'flexNegative',\n  'flexOrder',\n  'gridArea',\n  'gridRow',\n  'gridRowEnd',\n  'gridRowSpan',\n  'gridRowStart',\n  'gridColumn',\n  'gridColumnEnd',\n  'gridColumnSpan',\n  'gridColumnStart',\n  'fontWeight',\n  'lineClamp',\n  'lineHeight',\n  'opacity',\n  'order',\n  'orphans',\n  'scale',\n  'tabSize',\n  'widows',\n  'zIndex',\n  'zoom',\n  'fillOpacity', // SVG-related properties\n  'floodOpacity',\n  'stopOpacity',\n  'strokeDasharray',\n  'strokeDashoffset',\n  'strokeMiterlimit',\n  'strokeOpacity',\n  'strokeWidth'\n]);\nfunction isUnitlessNumber(name: string): boolean {\n  return unitlessNumbers.has(name);\n}\n","/* eslint-disable complexity */\nimport React, {\n  CSSProperties,\n  FunctionComponent,\n  PropsWithChildren,\n  ReactNode,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport {createPortal} from 'react-dom';\n\nimport {useMap} from '../hooks/use-map';\nimport {useMapsEventListener} from '../hooks/use-maps-event-listener';\nimport {setValueForStyles} from '../libraries/set-value-for-styles';\nimport {useMapsLibrary} from '../hooks/use-maps-library';\nimport {useDeepCompareEffect} from '../libraries/use-deep-compare-effect';\nimport {CustomMarkerContent, isAdvancedMarker} from './advanced-marker';\n\nexport type InfoWindowProps = Omit<\n  google.maps.InfoWindowOptions,\n  'headerContent' | 'content' | 'pixelOffset'\n> & {\n  style?: CSSProperties;\n  className?: string;\n  anchor?: google.maps.Marker | google.maps.marker.AdvancedMarkerElement | null;\n  pixelOffset?: [number, number];\n  shouldFocus?: boolean;\n  onClose?: () => void;\n  onCloseClick?: () => void;\n\n  headerContent?: ReactNode;\n};\n\n/**\n * Component to render an Info Window with the Maps JavaScript API\n */\nexport const InfoWindow: FunctionComponent<\n  PropsWithChildren<InfoWindowProps>\n> = props => {\n  const {\n    // content options\n    children,\n    headerContent,\n\n    style,\n    className,\n    pixelOffset,\n\n    // open options\n    anchor,\n    shouldFocus,\n\n    // events\n    onClose,\n    onCloseClick,\n\n    // other options\n    ...infoWindowOptions\n  } = props;\n\n  // ## create infowindow instance once the mapsLibrary is available.\n  const mapsLibrary = useMapsLibrary('maps');\n  const [infoWindow, setInfoWindow] = useState<google.maps.InfoWindow | null>(\n    null\n  );\n\n  const contentContainerRef = useRef<HTMLElement | null>(null);\n  const headerContainerRef = useRef<HTMLElement | null>(null);\n\n  useEffect(\n    () => {\n      if (!mapsLibrary) return;\n\n      contentContainerRef.current = document.createElement('div');\n      headerContainerRef.current = document.createElement('div');\n\n      const opts: google.maps.InfoWindowOptions = infoWindowOptions;\n      if (pixelOffset) {\n        opts.pixelOffset = new google.maps.Size(pixelOffset[0], pixelOffset[1]);\n      }\n\n      if (headerContent) {\n        // if headerContent is specified as string we can directly forward it,\n        // otherwise we'll pass the element the portal will render into\n        opts.headerContent =\n          typeof headerContent === 'string'\n            ? headerContent\n            : headerContainerRef.current;\n      }\n\n      // intentionally shadowing the state variables here\n      const infoWindow = new google.maps.InfoWindow(infoWindowOptions);\n      infoWindow.setContent(contentContainerRef.current);\n\n      setInfoWindow(infoWindow);\n\n      // unmount: remove infoWindow and content elements (note: close is called in a different effect-cleanup)\n      return () => {\n        infoWindow.setContent(null);\n\n        contentContainerRef.current?.remove();\n        headerContainerRef.current?.remove();\n\n        contentContainerRef.current = null;\n        headerContainerRef.current = null;\n\n        setInfoWindow(null);\n      };\n    },\n    // `infoWindowOptions` and other props are missing from dependencies:\n    //\n    // We don't want to re-create the infowindow instance\n    // when the options change.\n    // Updating the options is handled in the useEffect below.\n    //\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [mapsLibrary]\n  );\n\n  // ## update className and styles for `contentContainer`\n  // stores previously applied style properties, so they can be removed when unset\n  const prevStyleRef = useRef<CSSProperties | null>(null);\n  useEffect(() => {\n    if (!infoWindow || !contentContainerRef.current) return;\n\n    setValueForStyles(\n      contentContainerRef.current,\n      style || null,\n      prevStyleRef.current\n    );\n\n    prevStyleRef.current = style || null;\n\n    if (className !== contentContainerRef.current.className)\n      contentContainerRef.current.className = className || '';\n  }, [infoWindow, className, style]);\n\n  // ## update options\n  useDeepCompareEffect(\n    () => {\n      if (!infoWindow) return;\n\n      const opts: google.maps.InfoWindowOptions = infoWindowOptions;\n      if (!pixelOffset) {\n        opts.pixelOffset = null;\n      } else {\n        opts.pixelOffset = new google.maps.Size(pixelOffset[0], pixelOffset[1]);\n      }\n\n      if (!headerContent) {\n        opts.headerContent = null;\n      } else {\n        opts.headerContent =\n          typeof headerContent === 'string'\n            ? headerContent\n            : headerContainerRef.current;\n      }\n\n      infoWindow.setOptions(infoWindowOptions);\n    },\n\n    // dependency `infoWindow` isn't needed since options are also passed\n    // to the constructor when a new infoWindow is created.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [infoWindowOptions, pixelOffset, headerContent]\n  );\n\n  // ## bind event handlers\n  useMapsEventListener(infoWindow, 'close', onClose);\n  useMapsEventListener(infoWindow, 'closeclick', onCloseClick);\n\n  // ## open info window when content and map are available\n  const map = useMap();\n  useDeepCompareEffect(() => {\n    // `anchor === null` means an anchor is defined but not ready yet.\n    if (!map || !infoWindow || anchor === null) return;\n\n    const isOpenedWithAnchor = !!anchor;\n    const openOptions: google.maps.InfoWindowOpenOptions = {map};\n    if (anchor) {\n      openOptions.anchor = anchor;\n\n      // Only do the infowindow adjusting when dealing with an AdvancedMarker\n      if (isAdvancedMarker(anchor) && anchor.content instanceof Element) {\n        const wrapper = anchor.content as CustomMarkerContent;\n        const wrapperBcr = wrapper?.getBoundingClientRect();\n\n        // This checks whether or not the anchor has custom content with our own\n        // div wrapper. If not, that means we have a regular AdvancedMarker without any children.\n        // In that case we do not want to adjust the infowindow since it is all handled correctly\n        // by the Google Maps API.\n        if (wrapperBcr && wrapper?.isCustomMarker) {\n          // We can safely typecast here since we control that element and we know that\n          // it is a div\n          const anchorDomContent = anchor.content.firstElementChild\n            ?.firstElementChild as Element;\n\n          const contentBcr = anchorDomContent?.getBoundingClientRect();\n\n          // center infowindow above marker\n          const anchorOffsetX =\n            contentBcr.x -\n            wrapperBcr.x +\n            (contentBcr.width - wrapperBcr.width) / 2;\n          const anchorOffsetY = contentBcr.y - wrapperBcr.y;\n\n          const opts: google.maps.InfoWindowOptions = infoWindowOptions;\n\n          opts.pixelOffset = new google.maps.Size(\n            pixelOffset ? pixelOffset[0] + anchorOffsetX : anchorOffsetX,\n            pixelOffset ? pixelOffset[1] + anchorOffsetY : anchorOffsetY\n          );\n\n          infoWindow.setOptions(opts);\n        }\n      }\n    }\n\n    if (shouldFocus !== undefined) {\n      openOptions.shouldFocus = shouldFocus;\n    }\n\n    infoWindow.open(openOptions);\n\n    return () => {\n      // Note: when the infowindow has an anchor, it will automatically show up again when the\n      // anchor was removed from the map before infoWindow.close() is called but the it gets\n      // added back to the map after that.\n      // More information here: https://issuetracker.google.com/issues/343750849\n      if (isOpenedWithAnchor) infoWindow.set('anchor', null);\n\n      infoWindow.close();\n    };\n  }, [infoWindow, anchor, map, shouldFocus, infoWindowOptions, pixelOffset]);\n\n  return (\n    <>\n      {contentContainerRef.current &&\n        createPortal(children, contentContainerRef.current)}\n\n      {headerContainerRef.current !== null &&\n        createPortal(headerContent, headerContainerRef.current)}\n    </>\n  );\n};\n","import {StaticMapsLocation} from './types';\n\n/**\n * Formats a location into a string representation suitable for Google Static Maps API.\n *\n * @param location - The location to format, can be either a string or an object with lat/lng properties\n * @returns A string representation of the location in the format \"lat,lng\" or the original string\n *\n * @example\n * // Returns \"40.714728,-73.998672\"\n * formatLocation({ lat: 40.714728, lng: -73.998672 })\n *\n * @example\n * // Returns \"New York, NY\"\n * formatLocation(\"New York, NY\")\n */\nexport function formatLocation(location: StaticMapsLocation): string {\n  return typeof location === 'string'\n    ? location\n    : `${location.lat},${location.lng}`;\n}\n\n// Used for removing the leading pipe from the param string\nexport function formatParam(string: string) {\n  return string.slice(1);\n}\n","import {formatParam} from './helpers';\nimport {StaticMapsMarker} from './types';\n\n/**\n * Assembles marker parameters for static maps.\n *\n * This function takes an array of markers and groups them by their style properties.\n * It then creates a string representation of these markers, including their styles and locations,\n * which can be used as parameters for static map APIs.\n *\n * @param {StaticMapsMarker[]} [markers=[]] - An array of markers to be processed. Each marker can have properties such as color, label, size, scale, icon, anchor, and location.\n * @returns {string[]} An array of strings, each representing a group of markers with their styles and locations.\n *\n * @example\n * const markers = [\n *   { color: 'blue', label: 'A', size: 'mid', location: '40.714728,-73.998672' },\n *   { color: 'blue', label: 'B', size: 'mid', location: '40.714728,-73.998672' },\n *   { icon: 'http://example.com/icon.png', location: { lat: 40.714728, lng: -73.998672 } }\n * ];\n * const params = assembleMarkerParams(markers);\n * // Params will be an array of strings representing the marker parameters\n * Example output: [\n *   \"color:blue|label:A|size:mid|40.714728,-73.998672|40.714728,-73.998672\",\n *   \"color:blue|label:B|size:mid|40.714728,-73.998672|40.714728,-73.998672\",\n *   \"icon:http://example.com/icon.png|40.714728,-73.998672\"\n * ]\n */\nexport function assembleMarkerParams(markers: StaticMapsMarker[] = []) {\n  const markerParams: Array<string> = [];\n\n  // Group markers by style\n  const markersByStyle = markers?.reduce(\n    (styles, marker) => {\n      const {color = 'red', label, size, scale, icon, anchor} = marker;\n\n      // Create a unique style key based on either icon properties or standard marker properties\n      const relevantProps = icon ? [icon, anchor, scale] : [color, label, size];\n      const key = relevantProps.filter(Boolean).join('-');\n\n      styles[key] = styles[key] || [];\n      styles[key].push(marker);\n      return styles;\n    },\n    {} as Record<string, StaticMapsMarker[]>\n  );\n\n  Object.values(markersByStyle ?? {}).forEach(markers => {\n    let markerParam: string = '';\n\n    const {icon} = markers[0];\n\n    // Create marker style from first marker in group since all markers share the same style.\n    Object.entries(markers[0]).forEach(([key, value]) => {\n      // Determine which properties to include based on whether marker uses custom icon\n      const relevantKeys = icon\n        ? ['icon', 'anchor', 'scale']\n        : ['color', 'label', 'size'];\n\n      if (relevantKeys.includes(key)) {\n        markerParam += `|${key}:${value}`;\n      }\n    });\n\n    // Add location coordinates for each marker in the style group\n    // Handles both string locations and lat/lng object formats.\n    for (const marker of markers) {\n      const location =\n        typeof marker.location === 'string'\n          ? marker.location\n          : `${marker.location.lat},${marker.location.lng}`;\n\n      markerParam += `|${location}`;\n    }\n\n    markerParams.push(markerParam);\n  });\n\n  return markerParams.map(formatParam);\n}\n","import {formatLocation, formatParam} from './helpers';\nimport {StaticMapsPath} from './types';\n\n/**\n * Assembles path parameters for the Static Maps Api from an array of paths.\n *\n * This function groups paths by their style properties (color, weight, fillcolor, geodesic)\n * and then constructs a string of path parameters for each group. Each path parameter string\n * includes the style properties and the coordinates of the paths.\n *\n * @param {Array<StaticMapsPath>} [paths=[]] - An array of paths to be assembled into path parameters.\n * @returns {Array<string>} An array of path parameter strings.\n *\n * @example\n * const paths = [\n *   {\n *     color: 'red',\n *     weight: 5,\n *     coordinates: [\n *       { lat: 40.714728, lng: -73.998672 },\n *       { lat: 40.718217, lng: -73.998284 }\n *     ]\n *   }\n * ];\n *\n * const pathParams = assemblePathParams(paths);\n * Output: [\n *    'color:red|weight:5|40.714728,-73.998672|40.718217,-73.998284'\n *  ]\n */\nexport function assemblePathParams(paths: Array<StaticMapsPath> = []) {\n  const pathParams: Array<string> = [];\n\n  // Group paths by their style properties (color, weight, fillcolor, geodesic)\n  // to combine paths with identical styles into single parameter strings\n  const pathsByStyle = paths?.reduce(\n    (styles, path) => {\n      const {color = 'default', weight, fillcolor, geodesic} = path;\n\n      // Create unique key for this style combination\n      const key = [color, weight, fillcolor, geodesic]\n        .filter(Boolean)\n        .join('-');\n\n      styles[key] = styles[key] || [];\n      styles[key].push(path);\n      return styles;\n    },\n    {} as Record<string, Array<StaticMapsPath>>\n  );\n\n  // Process each group of paths with identical styles\n  Object.values(pathsByStyle ?? {}).forEach(paths => {\n    let pathParam = '';\n\n    // Build style parameter string using properties from first path in group\n    // since all paths in this group share the same style\n    Object.entries(paths[0]).forEach(([key, value]) => {\n      if (['color', 'weight', 'fillcolor', 'geodesic'].includes(key)) {\n        pathParam += `|${key}:${value}`;\n      }\n    });\n\n    // Add location for all marker in style group\n    for (const path of paths) {\n      if (typeof path.coordinates === 'string') {\n        pathParam += `|${decodeURIComponent(path.coordinates)}`;\n      } else {\n        for (const location of path.coordinates) {\n          pathParam += `|${formatLocation(location)}`;\n        }\n      }\n    }\n\n    pathParams.push(pathParam);\n  });\n\n  return pathParams.map(formatParam);\n}\n","import {formatParam} from './helpers';\n\n/**\n * Converts an array of Google Maps style objects into an array of style strings\n * compatible with the Google Static Maps API.\n *\n * @param styles - An array of Google Maps MapTypeStyle objects that define the styling rules\n * @returns An array of formatted style strings ready to be used with the Static Maps API\n *\n * @example\n * const styles = [{\n *   featureType: \"road\",\n *   elementType: \"geometry\",\n *   stylers: [{color: \"#ff0000\"}, {weight: 1}]\n * }];\n *\n * const styleStrings = assembleMapTypeStyles(styles);\n * // Returns: [\"|feature:road|element:geometry|color:0xff0000|weight:1\"]\n *\n * Each style string follows the format:\n * \"feature:{featureType}|element:{elementType}|{stylerName}:{stylerValue}\"\n *\n * Note: Color values with hexadecimal notation (#) are automatically converted\n * to the required 0x format for the Static Maps API.\n */\nexport function assembleMapTypeStyles(\n  styles: Array<google.maps.MapTypeStyle>\n): string[] {\n  return styles\n    .map((mapTypeStyle: google.maps.MapTypeStyle) => {\n      const {featureType, elementType, stylers = []} = mapTypeStyle;\n\n      let styleString = '';\n\n      if (featureType) {\n        styleString += `|feature:${featureType}`;\n      }\n\n      if (elementType) {\n        styleString += `|element:${elementType}`;\n      }\n\n      for (const styler of stylers) {\n        Object.entries(styler).forEach(([name, value]) => {\n          styleString += `|${name}:${String(value).replace('#', '0x')}`;\n        });\n      }\n\n      return styleString;\n    })\n    .map(formatParam);\n}\n","import {assembleMarkerParams} from './assemble-marker-params';\nimport {assemblePathParams} from './assemble-path-params';\nimport {formatLocation} from './helpers';\n\nimport {StaticMapsApiOptions} from './types';\nimport {assembleMapTypeStyles} from './assemble-map-type-styles';\n\nconst STATIC_MAPS_BASE = 'https://maps.googleapis.com/maps/api/staticmap';\n\n/**\n * Creates a URL for the Google Static Maps API with the specified parameters.\n *\n * @param {Object} options - The configuration options for the static map\n * @param {string} options.apiKey - Your Google Maps API key (required)\n * @param {number} options.width - The width of the map image in pixels (required)\n * @param {number} options.height - The height of the map image in pixels (required)\n * @param {StaticMapsLocation} [options.center] - The center point of the map (lat/lng or address).\n *  Required if no markers or paths or \"visible locations\" are provided.\n * @param {number} [options.zoom] - The zoom level of the map. Required if no markers or paths or \"visible locations\" are provided.\n * @param {1|2|4} [options.scale] - The resolution of the map (1, 2, or 4)\n * @param {string} [options.format] - The image format (png, png8, png32, gif, jpg, jpg-baseline)\n * @param {string} [options.mapType] - The type of map (roadmap, satellite, terrain, hybrid)\n * @param {string} [options.language] - The language of the map labels\n * @param {string} [options.region] - The region code for the map\n * @param {string} [options.map_id] - The Cloud-based map style ID\n * @param {StaticMapsMarker[]} [options.markers=[]] - Array of markers to display on the map\n * @param {StaticMapsPath[]} [options.paths=[]] - Array of paths to display on the map\n * @param {StaticMapsLocation[]} [options.visible=[]] - Array of locations that should be visible on the map\n * @param {MapTypeStyle[]} [options.style=[]] - Array of style objects to customize the map appearance\n *\n * @returns {string} The complete Google Static Maps API URL\n *\n * @throws {Error} If API key is not provided\n * @throws {Error} If width or height is not provided\n *\n * @example\n * const url = createStaticMapsUrl({\n *   apiKey: 'YOUR_API_KEY',\n *   width: 600,\n *   height: 400,\n *   center: { lat: 40.714728, lng: -73.998672 },\n *   zoom: 12,\n *   markers: [\n *     {\n *       location: { lat: 40.714728, lng: -73.998672 },\n *       color: 'red',\n *       label: 'A'\n *     }\n *   ],\n *   paths: [\n *     {\n *       coordinates: [\n *         { lat: 40.714728, lng: -73.998672 },\n *         { lat: 40.719728, lng: -73.991672 }\n *       ],\n *       color: '0x0000ff',\n *       weight: 5\n *     }\n *   ],\n *   style: [\n *     {\n *       featureType: 'road',\n *       elementType: 'geometry',\n *       stylers: [{color: '#00ff00'}]\n *     }\n *   ]\n * });\n *\n * // Results in URL similar to:\n * // https://maps.googleapis.com/maps/api/staticmap?key=YOUR_API_KEY\n * // &size=600x400\n * // &center=40.714728,-73.998672&zoom=12\n * // &markers=color:red|label:A|40.714728,-73.998672\n * // &path=color:0x0000ff|weight:5|40.714728,-73.998672|40.719728,-73.991672\n * // &style=feature:road|element:geometry|color:0x00ff00\n */\nexport function createStaticMapsUrl({\n  apiKey,\n  width,\n  height,\n  center,\n  zoom,\n  scale,\n  format,\n  mapType,\n  language,\n  region,\n  mapId,\n  markers = [],\n  paths = [],\n  visible = [],\n  style = []\n}: StaticMapsApiOptions) {\n  if (!apiKey) {\n    console.warn('API key is required');\n  }\n  if (!width || !height) {\n    console.warn('Width and height are required');\n  }\n\n  const params: Record<string, string | number | null> = {\n    key: apiKey,\n    size: `${width}x${height}`,\n    ...(center && {center: formatLocation(center)}),\n    ...(zoom && {zoom}),\n    ...(scale && {scale}),\n    ...(format && {format}),\n    ...(mapType && {maptype: mapType}),\n    ...(language && {language}),\n    ...(region && {region}),\n    ...(mapId && {map_id: mapId})\n  };\n\n  const url = new URL(STATIC_MAPS_BASE);\n\n  // Params that don't need special handling\n  Object.entries(params).forEach(([key, value]) => {\n    url.searchParams.append(key, String(value));\n  });\n\n  // Assemble Markers\n  for (const markerParam of assembleMarkerParams(markers)) {\n    url.searchParams.append('markers', markerParam);\n  }\n\n  // Assemble Paths\n  for (const pathParam of assemblePathParams(paths)) {\n    url.searchParams.append('path', pathParam);\n  }\n\n  // Assemble visible locations\n  if (visible.length) {\n    url.searchParams.append(\n      'visible',\n      visible.map(location => formatLocation(location)).join('|')\n    );\n  }\n\n  // Assemble Map Type Styles\n  for (const styleString of assembleMapTypeStyles(style)) {\n    url.searchParams.append('style', styleString);\n  }\n\n  return url.toString();\n}\n","import React from 'react';\n\nexport {createStaticMapsUrl} from '../libraries/create-static-maps-url';\nexport * from '../libraries/create-static-maps-url/types';\n\n/**\n * Props for the StaticMap component\n */\nexport type StaticMapProps = {\n  url: string;\n  className?: string;\n};\n\nexport const StaticMap = (props: StaticMapProps) => {\n  const {url, className} = props;\n\n  if (!url) throw new Error('URL is required');\n\n  return <img className={className} src={url} width=\"100%\" />;\n};\n","import {FunctionComponent, useEffect, useMemo} from 'react';\nimport {createPortal} from 'react-dom';\nimport {useMap} from '../hooks/use-map';\n\nimport type {PropsWithChildren} from 'react';\n\ntype MapControlProps = PropsWithChildren<{\n  position: ControlPosition;\n}>;\n\n/**\n * Copy of the `google.maps.ControlPosition` constants.\n * They have to be duplicated here since we can't wait for the maps API to load to be able to use them.\n */\nexport const ControlPosition = {\n  TOP_LEFT: 1,\n  TOP_CENTER: 2,\n  TOP: 2,\n  TOP_RIGHT: 3,\n  LEFT_CENTER: 4,\n  LEFT_TOP: 5,\n  LEFT: 5,\n  LEFT_BOTTOM: 6,\n  RIGHT_TOP: 7,\n  RIGHT: 7,\n  RIGHT_CENTER: 8,\n  RIGHT_BOTTOM: 9,\n  BOTTOM_LEFT: 10,\n  BOTTOM_CENTER: 11,\n  BOTTOM: 11,\n  BOTTOM_RIGHT: 12,\n  CENTER: 13,\n  BLOCK_START_INLINE_START: 14,\n  BLOCK_START_INLINE_CENTER: 15,\n  BLOCK_START_INLINE_END: 16,\n  INLINE_START_BLOCK_CENTER: 17,\n  INLINE_START_BLOCK_START: 18,\n  INLINE_START_BLOCK_END: 19,\n  INLINE_END_BLOCK_START: 20,\n  INLINE_END_BLOCK_CENTER: 21,\n  INLINE_END_BLOCK_END: 22,\n  BLOCK_END_INLINE_START: 23,\n  BLOCK_END_INLINE_CENTER: 24,\n  BLOCK_END_INLINE_END: 25\n} as const;\nexport type ControlPosition =\n  (typeof ControlPosition)[keyof typeof ControlPosition];\n\nexport const MapControl: FunctionComponent<MapControlProps> = ({\n  children,\n  position\n}) => {\n  const controlContainer = useMemo(() => document.createElement('div'), []);\n  const map = useMap();\n\n  useEffect(() => {\n    if (!map) return;\n\n    const controls = map.controls[position];\n\n    controls.push(controlContainer);\n\n    return () => {\n      const controlsArray = controls.getArray();\n      // controlsArray could be undefined if the map is in an undefined state (e.g. invalid API-key, see #276\n      if (!controlsArray) return;\n\n      const index = controlsArray.indexOf(controlContainer);\n      controls.removeAt(index);\n    };\n  }, [controlContainer, map, position]);\n\n  return createPortal(children, controlContainer);\n};\n","/* eslint-disable complexity */\nimport React, {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useState\n} from 'react';\n\nimport {useMap} from '../hooks/use-map';\n\nimport type {Ref} from 'react';\n\ntype MarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOver?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOut?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type MarkerProps = Omit<google.maps.MarkerOptions, 'map'> &\n  MarkerEventProps;\n\nexport type MarkerRef = Ref<google.maps.Marker | null>;\n\nfunction useMarker(props: MarkerProps) {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n  const map = useMap();\n\n  const {\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut,\n    ...markerOptions\n  } = props;\n\n  const {position, draggable} = markerOptions;\n\n  // create marker instance and add to the map once the map is available\n  useEffect(() => {\n    if (!map) {\n      if (map === undefined)\n        console.error('<Marker> has to be inside a Map component.');\n\n      return;\n    }\n\n    const newMarker = new google.maps.Marker(markerOptions);\n    newMarker.setMap(map);\n    setMarker(newMarker);\n\n    return () => {\n      newMarker.setMap(null);\n      setMarker(null);\n    };\n    // We do not want to re-render the whole marker when the options change.\n    // Marker options update is handled in a useEffect below.\n    // Excluding markerOptions from dependency array on purpose here.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  // attach and re-attach event-handlers when any of the properties change\n  useEffect(() => {\n    if (!marker) return;\n\n    const m = marker;\n\n    // Add event listeners\n    const gme = google.maps.event;\n\n    if (onClick) gme.addListener(m, 'click', onClick);\n    if (onDrag) gme.addListener(m, 'drag', onDrag);\n    if (onDragStart) gme.addListener(m, 'dragstart', onDragStart);\n    if (onDragEnd) gme.addListener(m, 'dragend', onDragEnd);\n    if (onMouseOver) gme.addListener(m, 'mouseover', onMouseOver);\n    if (onMouseOut) gme.addListener(m, 'mouseout', onMouseOut);\n\n    marker.setDraggable(Boolean(draggable));\n\n    return () => {\n      gme.clearInstanceListeners(m);\n    };\n  }, [\n    marker,\n    draggable,\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut\n  ]);\n\n  // update markerOptions (note the dependencies aren't properly checked\n  // here, we just assume that setOptions is smart enough to not waste a\n  // lot of time updating values that didn't change)\n  useEffect(() => {\n    if (!marker) return;\n    if (markerOptions) marker.setOptions(markerOptions);\n  }, [marker, markerOptions]);\n\n  // update position when changed\n  useEffect(() => {\n    // Should not update position when draggable\n    if (draggable || !position || !marker) return;\n\n    marker.setPosition(position);\n  }, [draggable, position, marker]);\n\n  return marker;\n}\n\n/**\n * Component to render a marker on a map\n */\nexport const Marker = forwardRef((props: MarkerProps, ref: MarkerRef) => {\n  const marker = useMarker(props);\n\n  useImperativeHandle(ref, () => marker as google.maps.Marker, [marker]);\n\n  return <></>;\n});\n\nexport function useMarkerRef() {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n\n  const refCallback = useCallback((m: google.maps.Marker | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","import {\n  Children,\n  FunctionComponent,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo\n} from 'react';\nimport {AdvancedMarkerContext} from './advanced-marker';\nimport {createPortal} from 'react-dom';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Props for the Pin component\n */\nexport type PinProps = PropsWithChildren<google.maps.marker.PinElementOptions>;\n\n/**\n * Component to configure the appearance of an AdvancedMarker\n */\nexport const Pin: FunctionComponent<PinProps> = props => {\n  const advancedMarker = useContext(AdvancedMarkerContext)?.marker;\n  const glyphContainer = useMemo(() => document.createElement('div'), []);\n\n  // Create Pin View instance\n  useEffect(() => {\n    if (!advancedMarker) {\n      if (advancedMarker === undefined) {\n        console.error(\n          'The <Pin> component can only be used inside <AdvancedMarker>.'\n        );\n      }\n\n      return;\n    }\n\n    if (props.glyph && props.children) {\n      logErrorOnce(\n        'The <Pin> component only uses children to render the glyph if both the glyph property and children are present.'\n      );\n    }\n\n    if (Children.count(props.children) > 1) {\n      logErrorOnce(\n        'Passing multiple children to the <Pin> component might lead to unexpected results.'\n      );\n    }\n\n    const pinViewOptions: google.maps.marker.PinElementOptions = {\n      ...props\n    };\n\n    const pinElement = new google.maps.marker.PinElement(pinViewOptions);\n\n    // Set glyph to glyph container if children are present (rendered via portal).\n    // If both props.glyph and props.children are present, props.children takes priority.\n    if (props.children) {\n      pinElement.glyph = glyphContainer;\n    }\n\n    // Set content of Advanced Marker View to the Pin View element\n    // Here we are selecting the anchor container.\n    // The hierarchy is as follows:\n    // \"advancedMarker.content\" (from google) -> \"pointer events reset div\" -> \"anchor container\"\n    const markerContent = advancedMarker.content?.firstChild?.firstChild;\n\n    while (markerContent?.firstChild) {\n      markerContent.removeChild(markerContent.firstChild);\n    }\n\n    if (markerContent) {\n      markerContent.appendChild(pinElement.element);\n    }\n  }, [advancedMarker, glyphContainer, props]);\n\n  return createPortal(props.children, glyphContainer);\n};\n","const mapLinear = (x: number, a1: number, a2: number, b1: number, b2: number) =>\n  b1 + ((x - a1) * (b2 - b1)) / (a2 - a1);\n\nconst getMapMaxTilt = (zoom: number) => {\n  if (zoom <= 10) {\n    return 30;\n  }\n  if (zoom >= 15.5) {\n    return 67.5;\n  }\n\n  // range [10...14]\n  if (zoom <= 14) {\n    return mapLinear(zoom, 10, 14, 30, 45);\n  }\n\n  // range [14...15.5]\n  return mapLinear(zoom, 14, 15.5, 45, 67.5);\n};\n\n/**\n * Function to limit the tilt range of the Google map when updating the view state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const limitTiltRange = ({viewState}: any) => {\n  const pitch = viewState.pitch;\n  const gmZoom = viewState.zoom + 1;\n  const maxTilt = getMapMaxTilt(gmZoom);\n\n  return {...viewState, fovy: 25, pitch: Math.min(maxTilt, pitch)};\n};\n"],"names":["APILoadingStatus","NOT_LOADED","LOADING","LOADED","FAILED","AUTH_FAILURE","MAPS_API_BASE_URL","GoogleMapsApiLoader","load","params","onLoadingStatusChange","_window$google","_this","libraries","split","serializedParams","serializeParams","listeners","push","window","google","maps","importLibrary","serializedApiParams","loadingStatus","notifyLoadingStatusListeners","initImportLibrary","console","warn","librariesToLoad","concat","Promise","resolve","all","map","name","then","e","reject","v","key","language","region","authReferrerPolicy","solutionChannel","join","_this2","error","apiPromise","loadApi","_document$querySelect","scriptElement","document","createElement","urlParams","URLSearchParams","_i","_Object$entries","Object","entries","length","_Object$entries$_i","value","urlParamName","replace","t","toLowerCase","set","String","async","src","toString","nonce","querySelector","onerror","Error","__googleMapsCallback__","gm_authFailure","head","append","libraryName","_iterator","_createForOfIteratorHelperLoose","_step","done","fn","_settle","state","_Pact","s","o","bind","pact","observer","prototype","onFulfilled","onRejected","result","callback","_isSettledPact","thenable","_forTo","array","body","check","i","_cycle","DEFAULT_SOLUTION_CHANNEL","APIProviderContext","React","createContext","useMapInstances","_useState","useState","mapInstances","setMapInstances","addMapInstance","mapInstance","id","instances","_extends2","_extends","removeMapInstance","_ref","remaining","_objectWithoutPropertiesLoose","_toPropertyKey","clearMapInstances","useGoogleMapsApiLoader","props","onLoad","onError","apiKey","version","_props$libraries","otherApiParams","_excluded","_useState2","status","setStatus","_useReducer","useReducer","loadedLibraries","action","_extends3","addLoadedLibrary","librariesString","useMemo","JSON","stringify","useCallback","_google","res","useEffect","_temp3","_catch","channel","undefined","_temp2","_temp","_forOf","APIProvider","children","loaderProps","_excluded2","_useMapInstances","_useGoogleMapsApiLoad","contextValue","Provider","useMapEvents","_loop","propName","handler","eventType","propNameToEventType","listener","event","addListener","ev","createMapEvent","remove","eventPropNames","type","srcEvent","detail","stoppable","stop","cameraEventTypes","includes","camEvent","center","getCenter","zoom","getZoom","heading","getHeading","tilt","getTilt","bounds","getBounds","Number","isFinite","toJSON","lat","lng","north","east","south","west","mouseEventTypes","_srcEvent$latLng","mouseEvent","domEvent","latLng","placeId","onBoundsChanged","onCenterChanged","onClick","onContextmenu","onDblclick","onDrag","onDragend","onDragstart","onHeadingChanged","onIdle","onIsFractionalZoomEnabledChanged","onMapCapabilitiesChanged","onMapTypeIdChanged","onMousemove","onMouseout","onMouseover","onProjectionChanged","onRenderingTypeChanged","onTilesLoaded","onTiltChanged","onZoomChanged","onCameraChanged","keys","useDeepCompareEffect","effect","deps","ref","useRef","current","isDeepEqual","mapOptionKeys","Set","useMapOptions","mapProps","mapOptions","_keys","has","setOptions","useApiLoadingStatus","_useContext","useContext","useDeckGLCameraUpdate","viewport","viewState","isDeckGlControlled","useLayoutEffect","latitude","longitude","bearing","pitch","moveCamera","isLatLngLiteral","obj","latLngEquals","a","b","A","toLatLngLiteral","B","useMapCameraParams","cameraStateRef","nextCamera","needsUpdate","AuthFailureMessage","style","position","top","left","bottom","right","zIndex","display","flexFlow","textAlign","justifyContent","fontSize","color","background","padding","useCallbackRef","el","setEl","useApiIsLoaded","useForceUpdate","x","forceUpdate","handleBoundsChange","assign","useTrackedCameraStateRef","CachedMapStack","pop","useMapInstance","context","apiIsLoaded","setMap","_useCallbackRef","container","containerRef","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme","hasZoom","hasCenter","_Object$keys","savedMapStateRef","mapId","cacheKey","mapDiv","getDiv","appendChild","setTimeout","setCenter","height","Map","defBounds","fitBounds","_savedMapStateRef$cur","savedMapId","savedCameraState","cameraState","clearInstanceListeners","GoogleMapsContext","ColorScheme","DARK","LIGHT","FOLLOW_SYSTEM","RenderingType","VECTOR","RASTER","UNINITIALIZED","className","_useMapInstance","mapRef","isControlledExternally","controlled","disableDefaultUI","gestureHandling","keyboardShortcuts","cameraOptions","_lat","_lng","_props$zoom","_props$heading","_props$tilt","combinedStyle","width","deckGLViewProps","shownMessages","logErrorOnce","args","slice","call","arguments","_console","add","apply","useMap","ctx","useMapsLibrary","useMapsEventListener","target","usePropBinding","object","prop","useDomEventListener","addEventListener","removeEventListener","isAdvancedMarker","marker","content","isElementNode","node","nodeType","Node","ELEMENT_NODE","CollisionBehavior","REQUIRED","REQUIRED_AND_HIDES_OPTIONAL","OPTIONAL_AND_HIDES_LOWER_PRIORITY","AdvancedMarkerContext","AdvancedMarkerAnchorPoint","TOP_LEFT","TOP_CENTER","TOP","TOP_RIGHT","LEFT_CENTER","LEFT_TOP","LEFT","LEFT_BOTTOM","RIGHT_TOP","RIGHT","RIGHT_CENTER","RIGHT_BOTTOM","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM","BOTTOM_RIGHT","CENTER","MarkerContent","styles","anchorPoint","_ref2","xTranslation","yTranslation","xTranslationFlipped","yTranslationFlipped","trimStart","startsWith","substring","transformStyle","transform","useAdvancedMarker","setMarker","contentContainer","setContentContainer","markerLibrary","onMouseEnter","onMouseLeave","onDragStart","onDragEnd","collisionBehavior","clickable","draggable","title","numChildren","Children","count","newMarker","AdvancedMarkerElement","contentElement","isCustomMarker","_contentElement","gmpDraggable","gmpClickable","Boolean","pointerEvents","firstElementChild","element","AdvancedMarker","forwardRef","_useAdvancedMarker","advancedMarkerContextValue","useImperativeHandle","createPortal","useAdvancedMarkerRef","_useState3","refCallback","m","setValueForStyles","prevStyles","elementStyle","styleName","hasOwnProperty","setValueForStyle","isCustomProperty","indexOf","setProperty","cssFloat","isUnitlessNumber","trim","unitlessNumbers","InfoWindow","headerContent","pixelOffset","anchor","shouldFocus","onClose","onCloseClick","infoWindowOptions","mapsLibrary","infoWindow","setInfoWindow","contentContainerRef","headerContainerRef","opts","Size","setContent","_contentContainerRef$","_headerContainerRef$c","prevStyleRef","isOpenedWithAnchor","openOptions","Element","wrapper","wrapperBcr","getBoundingClientRect","_anchor$content$first","anchorDomContent","contentBcr","anchorOffsetX","anchorOffsetY","y","open","close","Fragment","formatLocation","location","formatParam","string","assembleMarkerParams","markers","_markers","markerParams","markersByStyle","reduce","_marker$color","label","size","scale","icon","relevantProps","filter","values","forEach","markerParam","relevantKeys","assemblePathParams","paths","_paths","pathParams","pathsByStyle","path","_path$color","weight","fillcolor","geodesic","pathParam","coordinates","decodeURIComponent","_iterator2","_step2","assembleMapTypeStyles","mapTypeStyle","featureType","elementType","_mapTypeStyle$stylers","stylers","styleString","styler","STATIC_MAPS_BASE","createStaticMapsUrl","format","mapType","_ref$markers","_ref$paths","_ref$visible","visible","_ref$style","maptype","map_id","url","URL","searchParams","_iterator3","_step3","StaticMap","ControlPosition","BLOCK_START_INLINE_START","BLOCK_START_INLINE_CENTER","BLOCK_START_INLINE_END","INLINE_START_BLOCK_CENTER","INLINE_START_BLOCK_START","INLINE_START_BLOCK_END","INLINE_END_BLOCK_START","INLINE_END_BLOCK_CENTER","INLINE_END_BLOCK_END","BLOCK_END_INLINE_START","BLOCK_END_INLINE_CENTER","BLOCK_END_INLINE_END","MapControl","controlContainer","controls","controlsArray","getArray","index","removeAt","useMarker","onMouseOver","onMouseOut","markerOptions","Marker","gme","setDraggable","setPosition","useMarkerRef","Pin","advancedMarker","glyphContainer","_advancedMarker$conte","glyph","pinViewOptions","pinElement","PinElement","markerContent","firstChild","removeChild","mapLinear","a1","a2","b1","b2","getMapMaxTilt","limitTiltRange","gmZoom","maxTilt","fovy","Math","min"],"mappings":"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"}